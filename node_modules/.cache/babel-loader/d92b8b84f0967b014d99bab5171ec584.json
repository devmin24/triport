{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/parkminkyung/Desktop/git/triport/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14;import React from\"react\";import styled from\"styled-components\";import{BoardView,BoardComment,BoardDetailMap}from\"components/components\";import{LikeFill,LikeEmpty}from\"media/svg/Svg\";import{actionCreators as TrilogActions}from'redux/modules/trilog';import{useDispatch,useSelector}from'react-redux';import{history}from\"redux/configureStore\";import Swal from\"sweetalert2\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BoardDetail=function BoardDetail(props){var id=props.match.params.id;// 상세 게시글 ID\nvar dispatch=useDispatch();var is_login=useSelector(function(state){return state.user.is_login;});// 로그인 여부\nvar detail=useSelector(function(state){return state.trilog.detail;});// 상세 게시글 정보\nvar is_loading=useSelector(function(state){return state.trilog.loading.detail_loading;});// 상세 게시글 로딩 여부\nvar comment=useSelector(function(state){return state.trilog.parent_comment.list;});// 부모 댓글\nvar is_last=useSelector(function(state){return state.trilog.parent_comment.is_last;});// 부모 댓글 페이징 여부 - 다음 댓글 있나 없나\nvar commentRef=React.useRef('');React.useEffect(function(){dispatch(TrilogActions.getTrilogDetail(id));},[]);var postParentComment=function postParentComment(){if(!is_login){Swal.fire({title:\"로그인\",text:\"로그인을 먼저 해주세요.\",icon:\"warning\",showCancelButton:true,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"로그인하기\",cancelButtonText:\"닫기\"}).then(function(result){if(result.isConfirmed){history.push(\"/login\");}});return;}dispatch(TrilogActions.addParentComment(id,commentRef.current.value));document.getElementById('commentInput').value='';// 초기화\n};var hitLike=function hitLike(){if(!is_login){Swal.fire({title:\"로그인\",text:\"로그인을 먼저 해주세요.\",icon:\"warning\",showCancelButton:true,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"로그인하기\",cancelButtonText:\"닫기\"}).then(function(result){if(result.isConfirmed){history.push(\"/login\");}});return;}dispatch(TrilogActions.setLikeTrilogDetail(id));};var getMorecomment=function getMorecomment(){dispatch(TrilogActions.getParentCommentScroll(id));};var editTrilog=function editTrilog(){history.replace(\"/trilog/write/\".concat(id));};var deleteTrilog=function deleteTrilog(){Swal.fire({title:'해당 게시물을 삭제하시겠습니까?',showDenyButton:true,showCancelButton:false,confirmButtonText:\"\\uC0AD\\uC81C\",denyButtonText:\"\\uCDE8\\uC18C\"}).then(function(result){if(result.isConfirmed){dispatch(TrilogActions.removeTrilog(id));}});};return/*#__PURE__*/_jsx(DetailContainer,{children:is_loading?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(UserContainer,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:detail.author.profileImgUrl}),/*#__PURE__*/_jsx(\"span\",{children:detail.author.nickname})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(LastUpdate,{children:[\"\\uCD5C\\uCD08 \\uB4F1\\uB85D\\uC77C : \",detail.information.createdAt]}),detail.member.isMembers?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EditButton,{type:\"button\",value:\"\\uC218\\uC815\",onClick:editTrilog}),/*#__PURE__*/_jsx(DeleteButton,{type:\"button\",value:\"\\uC0AD\\uC81C\",onClick:deleteTrilog})]}):/*#__PURE__*/_jsx(_Fragment,{})]})]}),/*#__PURE__*/_jsx(Separator,{}),/*#__PURE__*/_jsx(ToastViewContainer,{children:detail.information.description===\"\"?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(BoardView,{content:detail.information.description})}),/*#__PURE__*/_jsx(MapConatiner,{children:detail.information.address==='지도 마커를 클릭하시면 주소가 여기 표시됩니다.'||detail.information.address==='seoul'?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(BoardDetailMap,{address:detail.information.address})}),/*#__PURE__*/_jsx(Separator,{}),/*#__PURE__*/_jsxs(LikeCommentContainer,{children:[/*#__PURE__*/_jsxs(Infomation,{children:[/*#__PURE__*/_jsx(\"span\",{onClick:hitLike,children:detail.member.isLike?/*#__PURE__*/_jsx(LikeFill,{}):/*#__PURE__*/_jsx(LikeEmpty,{})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uC88B\\uC544\\uC694+\"}),/*#__PURE__*/_jsx(LikeCount,{children:detail.information.likeNum})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uB313\\uAE00+\"}),/*#__PURE__*/_jsx(CommentCount,{children:detail.information.commentNum})]})]}),/*#__PURE__*/_jsx(CommentInput,{children:/*#__PURE__*/_jsx(\"input\",{id:\"commentInput\",type:\"text\",placeholder:\"\\uB313\\uAE00\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\",ref:commentRef,onKeyPress:function onKeyPress(e){if(window.event.keyCode===13){postParentComment();}}})}),/*#__PURE__*/_jsx(Separator,{}),comment.map(function(val,index){return/*#__PURE__*/_jsx(BoardComment,{id:id,comment:val},index);})]}),is_last?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(ShowMoreComment,{children:/*#__PURE__*/_jsx(\"span\",{onClick:getMorecomment,children:\"\\uB313\\uAE00 \\uB354 \\uBCF4\\uAE30\"})})]})});};var Separator=styled.hr(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  color: #89acff;\\n  opacity: 0.5;\\n  margin: 0.75rem 0;\\n\"])));var DetailContainer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 1280px;\\n  margin: 0 auto;\\n  position: relative;\\n\\n  @media (max-width: 1270px) {\\n    width: 850px;\\n  }\\n\\n  @media (max-width: 980px) {\\n    width: 700px;\\n  }\\n\\n  @media (max-width: 768px) {\\n    width: 500px;\\n  }\\n\\n  @media (max-width: 600px) {\\n    width: 300px;\\n  }\\n\"])));var UserContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    display: flex;\\n    align-items: center;\\n    width: 100%;\\n    justify-content: space-between;\\n    font-family: AppleSDGothicNeoB;\\n\\n    & img {\\n        width: 2.375rem;\\n        border-radius: 50%;\\n        margin-right: .5rem;\\n    }\\n\\n    & div {\\n        display: flex;\\n        align-items: center;\\n    }\\n\"])));var LastUpdate=styled.span(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  @media (max-width: 600px) {\\n    display: none;\\n  }\\n\"])));var LikeCount=styled.span(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin-right: 0.5rem;\\n\"])));var CommentCount=styled.span(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\"])));var ToastViewContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\"])));var MapConatiner=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\"])));var LikeCommentContainer=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\"])));var Infomation=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  font-family: \\\"AppleSDGothicNeoR\\\";\\n\\n  & svg {\\n    cursor: pointer;\\n    width: 3.2rem;\\n  }\\n\"])));var CommentInput=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  margin: 0.5rem 0;\\n  width: 100%;\\n\\n  & input {\\n    outline: none;\\n    border: 0;\\n    box-sizing: border-box;\\n    width: 100%;\\n    height: 40px;\\n    border: 1px solid rgb(43,97,225,0.6);\\n    border-radius: 5px;\\n    padding: 0 1rem;\\n  }\\n\"])));var ShowMoreComment=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  justify-content: center;\\n  margin: 1.5rem 0 1.5rem 0;\\n  & span {\\n      cursor: pointer;\\n  }\\n\"])));var EditButton=styled.input(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n    cursor: pointer;\\n    background-color: #2b61e1;\\n    color: #fff;\\n    border: 1px solid #2b61e1;\\n    border-radius: 5px;\\n    padding: .25rem .75rem;\\n    margin: 0 .5rem;\\n\"])));var DeleteButton=styled.input(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n    cursor: pointer;\\n    background-color: #f22d3f;\\n    border: 1px solid #f22d3f;\\n    color: #fff;\\n    border-radius: 5px;\\n    padding: .25rem .75rem;\\n\"])));export default BoardDetail;","map":{"version":3,"sources":["/Users/parkminkyung/Desktop/git/triport/src/pages/BoardDetail.js"],"names":["React","styled","BoardView","BoardComment","BoardDetailMap","LikeFill","LikeEmpty","actionCreators","TrilogActions","useDispatch","useSelector","history","Swal","BoardDetail","props","id","match","params","dispatch","is_login","state","user","detail","trilog","is_loading","loading","detail_loading","comment","parent_comment","list","is_last","commentRef","useRef","useEffect","getTrilogDetail","postParentComment","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","push","addParentComment","current","value","document","getElementById","hitLike","setLikeTrilogDetail","getMorecomment","getParentCommentScroll","editTrilog","replace","deleteTrilog","showDenyButton","denyButtonText","removeTrilog","author","profileImgUrl","nickname","information","createdAt","member","isMembers","description","address","isLike","likeNum","commentNum","e","window","event","keyCode","map","val","index","Separator","hr","DetailContainer","div","UserContainer","LastUpdate","span","LikeCount","CommentCount","ToastViewContainer","MapConatiner","LikeCommentContainer","Infomation","CommentInput","ShowMoreComment","EditButton","input","DeleteButton"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { BoardView, BoardComment, BoardDetailMap } from \"components/components\";\r\nimport { LikeFill, LikeEmpty } from \"media/svg/Svg\";\r\nimport { actionCreators as TrilogActions } from 'redux/modules/trilog';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { history } from \"redux/configureStore\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst BoardDetail = (props) => {\r\n    const id = props.match.params.id; // 상세 게시글 ID\r\n    const dispatch = useDispatch();\r\n\r\n    const is_login = useSelector((state) => state.user.is_login); // 로그인 여부\r\n    const detail = useSelector((state) => state.trilog.detail); // 상세 게시글 정보\r\n    const is_loading = useSelector((state) => state.trilog.loading.detail_loading); // 상세 게시글 로딩 여부\r\n    const comment = useSelector((state) => state.trilog.parent_comment.list); // 부모 댓글\r\n    const is_last = useSelector((state) => state.trilog.parent_comment.is_last); // 부모 댓글 페이징 여부 - 다음 댓글 있나 없나\r\n\r\n    const commentRef = React.useRef('');\r\n\r\n    React.useEffect(() => {\r\n        dispatch(TrilogActions.getTrilogDetail(id));\r\n    }, []);\r\n\r\n    const postParentComment = () => {\r\n        if(!is_login) {\r\n          Swal.fire({\r\n            title: \"로그인\",\r\n            text: \"로그인을 먼저 해주세요.\",\r\n            icon: \"warning\",\r\n            showCancelButton: true,\r\n            confirmButtonColor: \"#3085d6\",\r\n            cancelButtonColor: \"#d33\",\r\n            confirmButtonText: \"로그인하기\",\r\n            cancelButtonText: \"닫기\",\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                history.push(\"/login\");\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        dispatch(TrilogActions.addParentComment(id, commentRef.current.value));\r\n        document.getElementById('commentInput').value = ''; // 초기화\r\n    };\r\n\r\n    const hitLike = () => {\r\n        if(!is_login) {\r\n          Swal.fire({\r\n            title: \"로그인\",\r\n            text: \"로그인을 먼저 해주세요.\",\r\n            icon: \"warning\",\r\n            showCancelButton: true,\r\n            confirmButtonColor: \"#3085d6\",\r\n            cancelButtonColor: \"#d33\",\r\n            confirmButtonText: \"로그인하기\",\r\n            cancelButtonText: \"닫기\",\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                history.push(\"/login\");\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        dispatch(TrilogActions.setLikeTrilogDetail(id));\r\n    };\r\n\r\n    const getMorecomment = () => {\r\n        dispatch(TrilogActions.getParentCommentScroll(id));\r\n    };\r\n\r\n    const editTrilog = () => {\r\n        history.replace(`/trilog/write/${id}`);\r\n    };\r\n\r\n    const deleteTrilog = () => {\r\n      Swal.fire({\r\n        title: '해당 게시물을 삭제하시겠습니까?',\r\n        showDenyButton: true,\r\n        showCancelButton: false,\r\n        confirmButtonText: `삭제`,\r\n        denyButtonText: `취소`,\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          dispatch(TrilogActions.removeTrilog(id));\r\n        }\r\n      });\r\n    };\r\n\r\n    return (\r\n      <DetailContainer>\r\n        {is_loading ? (\r\n          <></>\r\n        ) : (\r\n          <>\r\n            <UserContainer>\r\n              <div>\r\n                <img src={detail.author.profileImgUrl} />\r\n                <span>{detail.author.nickname}</span>\r\n              </div>\r\n              <div>\r\n                <LastUpdate>최초 등록일 : {detail.information.createdAt}</LastUpdate>\r\n                {detail.member.isMembers ? (\r\n                  <>\r\n                    <EditButton type=\"button\" value=\"수정\" onClick={editTrilog} />\r\n                    <DeleteButton type=\"button\" value=\"삭제\" onClick={deleteTrilog} />\r\n                  </>\r\n                ) : (\r\n                  <></>\r\n                )}\r\n              </div>\r\n            </UserContainer>\r\n            <Separator />\r\n            <ToastViewContainer>\r\n              {detail.information.description === \"\" ? (\r\n                <></>\r\n              ) : (\r\n                <BoardView content={detail.information.description} />\r\n              )}\r\n            </ToastViewContainer>\r\n            <MapConatiner>\r\n              {detail.information.address === '지도 마커를 클릭하시면 주소가 여기 표시됩니다.' || detail.information.address === 'seoul' ? (<></>) : (<BoardDetailMap address={detail.information.address} />) }\r\n            </MapConatiner>\r\n            <Separator />\r\n            <LikeCommentContainer>\r\n              <Infomation>\r\n                <span onClick={hitLike}>\r\n                  {detail.member.isLike ? <LikeFill /> : <LikeEmpty />}\r\n                </span>\r\n                <div>\r\n                  <span>좋아요+</span>\r\n                  <LikeCount>{detail.information.likeNum}</LikeCount>\r\n                </div>\r\n                <div>\r\n                  <span>댓글+</span>\r\n                  <CommentCount>{detail.information.commentNum}</CommentCount>\r\n                </div>\r\n              </Infomation>\r\n              <CommentInput>\r\n                <input\r\n                  id=\"commentInput\"\r\n                  type=\"text\"\r\n                  placeholder=\"댓글을 입력하세요.\"\r\n                  ref={commentRef}\r\n                  onKeyPress={(e) => {\r\n                    if (window.event.keyCode === 13) {\r\n                      postParentComment();\r\n                    }\r\n                  }}\r\n                />\r\n              </CommentInput>\r\n              <Separator />\r\n              {comment.map((val, index) => {\r\n                return <BoardComment id={id} comment={val} key={index} />;\r\n              })}\r\n            </LikeCommentContainer>\r\n            {is_last ? (\r\n              <></>\r\n            ) : (\r\n              <ShowMoreComment>\r\n                <span onClick={getMorecomment}>댓글 더 보기</span>\r\n              </ShowMoreComment>\r\n            )}\r\n          </>\r\n        )}\r\n      </DetailContainer>\r\n    );\r\n};\r\n\r\nconst Separator = styled.hr`\r\n  color: #89acff;\r\n  opacity: 0.5;\r\n  margin: 0.75rem 0;\r\n`;\r\n\r\nconst DetailContainer = styled.div`\r\n  width: 1280px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n\r\n  @media (max-width: 1270px) {\r\n    width: 850px;\r\n  }\r\n\r\n  @media (max-width: 980px) {\r\n    width: 700px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 500px;\r\n  }\r\n\r\n  @media (max-width: 600px) {\r\n    width: 300px;\r\n  }\r\n`;\r\n\r\nconst UserContainer = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    justify-content: space-between;\r\n    font-family: AppleSDGothicNeoB;\r\n\r\n    & img {\r\n        width: 2.375rem;\r\n        border-radius: 50%;\r\n        margin-right: .5rem;\r\n    }\r\n\r\n    & div {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n`;\r\n\r\nconst LastUpdate = styled.span`\r\n  @media (max-width: 600px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst LikeCount = styled.span`\r\n  margin-right: 0.5rem;\r\n`;\r\n\r\nconst CommentCount = styled.span``;\r\n\r\nconst ToastViewContainer = styled.div``;\r\n\r\nconst MapConatiner = styled.div``;\r\n\r\nconst LikeCommentContainer = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Infomation = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-family: \"AppleSDGothicNeoR\";\r\n\r\n  & svg {\r\n    cursor: pointer;\r\n    width: 3.2rem;\r\n  }\r\n`;\r\n\r\nconst CommentInput = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 0.5rem 0;\r\n  width: 100%;\r\n\r\n  & input {\r\n    outline: none;\r\n    border: 0;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 40px;\r\n    border: 1px solid rgb(43,97,225,0.6);\r\n    border-radius: 5px;\r\n    padding: 0 1rem;\r\n  }\r\n`;\r\n\r\nconst ShowMoreComment = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 1.5rem 0 1.5rem 0;\r\n  & span {\r\n      cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst EditButton = styled.input`\r\n    cursor: pointer;\r\n    background-color: #2b61e1;\r\n    color: #fff;\r\n    border: 1px solid #2b61e1;\r\n    border-radius: 5px;\r\n    padding: .25rem .75rem;\r\n    margin: 0 .5rem;\r\n`;\r\n\r\nconst DeleteButton = styled.input`\r\n    cursor: pointer;\r\n    background-color: #f22d3f;\r\n    border: 1px solid #f22d3f;\r\n    color: #fff;\r\n    border-radius: 5px;\r\n    padding: .25rem .75rem;\r\n`;\r\n\r\nexport default BoardDetail;\r\n"]},"metadata":{},"sourceType":"module"}