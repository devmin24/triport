{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { produce } from 'immer'; // 불변성 유지\n\n/* Trilog - 트릴로그 */\n\nconst trilogSlice = createSlice({\n  name: \"trilog\",\n  initialState: {\n    main: {\n      list: [],\n      is_last: false,\n      page: 1\n    },\n    detail: {\n      information: {\n        id: 1,\n        title: '',\n        description: '',\n        address: '',\n        likeNum: 0,\n        commentNum: 0,\n        modifiedAt: '2011-01-01 12:00:00'\n      },\n      author: {\n        nickname: 'Triport',\n        profileImgUrl: ''\n      },\n      member: {\n        isLike: false,\n        isMember: false\n      }\n    },\n    parent_comment: {\n      list: [],\n      is_last: false,\n      page: 1\n    },\n    child_comment: {\n      list: [],\n      is_last: false,\n      page: 1\n    }\n  },\n  reducers: {\n    setTrilogMainAdd: (state, action) => produce(state, draft => {\n      draft.main.list = [...draft.main.list, ...action.payload.results];\n      draft.main.is_last = action.payload.last;\n    }),\n    setTrilogMain: (state, action) => produce(state, draft => {\n      draft.main.list = action.payload.results;\n      draft.main.is_last = action.payload.last;\n    }),\n    setTrilogMainPage: (state, action) => produce(state, draft => {\n      draft.main.page = action.payload;\n    }),\n    setTrilogParentCommentPage: (state, action) => produce(state, draft => {\n      draft.main.page = action.payload;\n    }),\n    setTrilogDetail: (state, action) => produce(state, draft => {\n      draft.detail = action.payload.results;\n    }),\n    setTrilogParentComment: (state, action) => produce(state, draft => {\n      draft.parent_comment.list = action.payload.results;\n      draft.parent_comment.is_last = action.payload.last;\n    }),\n    addTrilogParentComment: (state, action) => produce(state, draft => {\n      draft.parent_comment.list = [...draft.parent_comment.list, ...action.payload.results];\n      draft.parent_comment.is_last = action.payload.last;\n    }),\n    setTrilogChildComment: (state, action) => produce(state, draft => {\n      draft.child_comment.list = action.payload.results;\n      draft.child_comment.is_last = action.payload.last;\n    }),\n    setTrilogDetailLike: (state, action) => produce(state, draft => {\n      if (draft.detail.member.isLike) {\n        draft.detail.information.likeNum -= 1;\n      } else {\n        draft.detail.information.likeNum += 1;\n      }\n\n      draft.detail.member.isLike = !draft.detail.member.isLike;\n    }),\n    addTrilogParentComment: (state, action) => produce(state, draft => {\n      draft.parent_comment.list = action.payload.results;\n      draft.parent_comment.is_last = action.payload.last;\n      draft.detail.information.commentNum += 1;\n    })\n  }\n});\n\nconst getTrilogMain = (filter, keyword) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    const page = getState().trilog.main.page;\n    fetch(`http://13.209.8.146/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (page === 1) {\n        dispatch(setTrilogMain(data));\n      } else {\n        console.log('Add');\n        dispatch(setTrilogMainAdd(data));\n      }\n\n      if (!data.last) {\n        dispatch(setTrilogMainPage(page + 1));\n      } else {\n        dispatch(setTrilogMainPage(1));\n      }\n    }).catch(err => console.log(err, \"메인 error\"));\n  };\n};\n\nconst getTrilogMainFilter = (filter, keyword) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    const page = 1;\n    fetch(`http://13.209.8.146/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (page === 1) {\n        dispatch(setTrilogMain(data));\n      } else {\n        dispatch(setTrilogMainAdd(data));\n      }\n\n      if (!data.last) {\n        dispatch(setTrilogMainPage(page + 1));\n      } else {\n        dispatch(setTrilogMainPage(1));\n      }\n    }).catch(err => console.log(err, \"메인 필터 error\"));\n  };\n};\n\nconst getTrilogDetail = id => {\n  return async function (dispatch, getState, {\n    history\n  }) {\n    const page = getState().trilog.parent_comment.page;\n    const access_token = localStorage.getItem(\"access_token\");\n    const detail = await fetch(`http://13.209.8.146/api/all/boards/detail/${id}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => data).catch(err => console.log(err, 'trilog detail'));\n    const comment = await fetch(`http://13.209.8.146/api/all/boards/comments/parents/${id}?page=1`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (!data.last) {\n        dispatch(setTrilogParentCommentPage(page + 1));\n      } else {\n        dispatch(setTrilogParentCommentPage(1));\n      }\n\n      return data;\n    }).catch(err => console.log(err, 'trilog parent comment'));\n    dispatch(setTrilogDetail(detail));\n    dispatch(setTrilogParentComment(comment));\n  };\n};\n\nconst addTrilog = trilog => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n\n    if (trilog.is_edit) {\n      fetch(`http://13.209.8.146/api/boards/${trilog.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'Authorization': `${access_token}`\n        },\n        body: JSON.stringify({\n          title: trilog.title,\n          address: trilog.address,\n          description: trilog.description,\n          imageUrlList: trilog.imageUrlList\n        })\n      }).then(res => res.json()).then(data => {\n        alert(data.msg);\n        history.replace('/trilog');\n      }).catch(err => console.log(err, 'Trilog Edit'));\n    } else {\n      fetch('http://13.209.8.146/api/boards/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'Authorization': `${access_token}`\n        },\n        body: JSON.stringify({\n          title: trilog.title,\n          address: trilog.address,\n          description: trilog.description,\n          imageUrlList: trilog.imageUrlList\n        })\n      }).then(res => res.json()).then(data => {\n        alert(data.msg);\n        history.replace('/trilog');\n      }).catch(err => console.log(err, 'Trilog Add'));\n    }\n  };\n};\n\nconst setLikeTrilog = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`http://13.209.8.146/api/boards/like/${id}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).catch(err => console.log(err, 'trilog like'));\n  };\n};\n\nconst setLikeTrilogDetail = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`http://13.209.8.146/api/boards/like/${id}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).catch(err => console.log(err, 'trilog detail like'));\n    dispatch(setTrilogDetailLike());\n  };\n};\n\nconst getParentCommentScroll = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    const page = getState().trilog.parent_comment.page;\n    fetch(`http://13.209.8.146/api/all/boards/comments/parents/${id}?page=${page}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (page === 1) {\n        dispatch(setTrilogMain(data));\n      } else {\n        console.log('Add');\n        dispatch(setTrilogMainAdd(data));\n      }\n\n      if (!data.last) {\n        dispatch(setTrilogParentCommentPage(page + 1));\n      } else {\n        dispatch(setTrilogParentCommentPage(1));\n      }\n    }).catch(err => console.log(err, \"부모 댓글 스크롤 error\"));\n  };\n};\n\nconst addParentComment = (id, contents) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`http://13.209.8.146/api/boards/comments/parents/${id}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      },\n      body: JSON.stringify({\n        contents: contents\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch(addTrilogParentComment(data));\n      alert('댓글 등록이 완료되었습니다.');\n    }).catch(err => console.log(err, 'add comment trilog'));\n  };\n};\n\nconst getChildComment = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`http://13.209.8.146/api/all/boards/comments/children/${id}?page=1`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      dispatch(setTrilogChildComment(data));\n    }).catch(err => console.log(err, 'get child comment trilog'));\n  };\n};\n\nconst addChildComment = (id, contents) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`http://13.209.8.146/api/boards/comments/children/${id}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      },\n      body: JSON.stringify({\n        contents: contents\n      })\n    }).then(res => res.json()).catch(err => console.log(err, 'child comment post'));\n  };\n};\n\nconst actionCreators = {\n  getTrilogMain,\n  getTrilogMainFilter,\n  getTrilogDetail,\n  addTrilog,\n  setLikeTrilog,\n  setLikeTrilogDetail,\n  addParentComment,\n  getChildComment,\n  addChildComment,\n  getParentCommentScroll\n};\nexport const {\n  setTrilogMain,\n  setTrilogDetail,\n  setTrilogMainPage,\n  setTrilogMainAdd,\n  setTrilogFilter,\n  setTrilogParentComment,\n  setTrilogDetailLike,\n  setTrilogChildComment,\n  addTrilogParentComment,\n  setTrilogParentCommentPage\n} = trilogSlice.actions;\nexport default trilogSlice.reducer;\nexport { actionCreators };","map":{"version":3,"sources":["/Users/parkminkyung/Desktop/git/triport/src/redux/modules/trilog.js"],"names":["createSlice","produce","trilogSlice","name","initialState","main","list","is_last","page","detail","information","id","title","description","address","likeNum","commentNum","modifiedAt","author","nickname","profileImgUrl","member","isLike","isMember","parent_comment","child_comment","reducers","setTrilogMainAdd","state","action","draft","payload","results","last","setTrilogMain","setTrilogMainPage","setTrilogParentCommentPage","setTrilogDetail","setTrilogParentComment","addTrilogParentComment","setTrilogChildComment","setTrilogDetailLike","getTrilogMain","filter","keyword","dispatch","getState","history","access_token","localStorage","getItem","trilog","fetch","method","headers","then","res","json","data","console","log","catch","err","getTrilogMainFilter","getTrilogDetail","comment","addTrilog","is_edit","body","JSON","stringify","imageUrlList","alert","msg","replace","setLikeTrilog","setLikeTrilogDetail","getParentCommentScroll","addParentComment","contents","getChildComment","addChildComment","actionCreators","setTrilogFilter","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { produce } from 'immer'; // 불변성 유지\r\n\r\n/* Trilog - 트릴로그 */\r\nconst trilogSlice = createSlice({\r\n    name : \"trilog\",\r\n    initialState : {\r\n        main : {\r\n            list : [],\r\n            is_last : false,\r\n            page : 1,\r\n        },\r\n        detail : {\r\n            information : {\r\n                id: 1,\r\n                title: '',\r\n                description: '',\r\n                address: '',\r\n                likeNum: 0,\r\n                commentNum: 0,\r\n                modifiedAt: '2011-01-01 12:00:00',\r\n            },\r\n            author: {\r\n                nickname: 'Triport',\r\n                profileImgUrl: '',\r\n            },\r\n            member: {\r\n                isLike: false,\r\n                isMember: false,\r\n            }\r\n        },\r\n        parent_comment : {\r\n            list : [],\r\n            is_last : false,\r\n            page : 1\r\n        },\r\n        child_comment : {\r\n            list : [],\r\n            is_last : false,\r\n            page : 1\r\n        },\r\n    },\r\n    reducers: {\r\n        setTrilogMainAdd : (state, action) => produce(state, (draft) => {\r\n            draft.main.list = [...draft.main.list, ...action.payload.results];\r\n            draft.main.is_last = action.payload.last;\r\n        }),\r\n\r\n        setTrilogMain : (state, action) => produce(state, (draft) => {\r\n            draft.main.list = action.payload.results;\r\n            draft.main.is_last = action.payload.last;\r\n        }),\r\n\r\n        setTrilogMainPage : (state, action) => produce(state, (draft) => {\r\n            draft.main.page = action.payload;\r\n        }),\r\n\r\n        setTrilogParentCommentPage : (state, action) => produce(state, (draft) => {\r\n            draft.main.page = action.payload;\r\n        }),\r\n\r\n        setTrilogDetail : (state, action) => produce(state, (draft) => {\r\n            draft.detail = action.payload.results;\r\n        }),\r\n\r\n        setTrilogParentComment : (state, action) => produce(state, (draft) => {\r\n            draft.parent_comment.list = action.payload.results;\r\n            draft.parent_comment.is_last = action.payload.last;\r\n        }),\r\n\r\n        addTrilogParentComment : (state, action) => produce(state, (draft) => {\r\n            draft.parent_comment.list = [...draft.parent_comment.list, ...action.payload.results];\r\n            draft.parent_comment.is_last = action.payload.last;\r\n        }),\r\n\r\n        setTrilogChildComment : (state, action) => produce(state, (draft) => {\r\n            draft.child_comment.list = action.payload.results;\r\n            draft.child_comment.is_last = action.payload.last;\r\n        }),\r\n\r\n        setTrilogDetailLike : (state, action) => produce(state, (draft) => {\r\n            if(draft.detail.member.isLike){\r\n                draft.detail.information.likeNum -= 1;\r\n            } else {\r\n                draft.detail.information.likeNum += 1;\r\n            }\r\n            \r\n            draft.detail.member.isLike = !draft.detail.member.isLike;\r\n        }),\r\n\r\n        addTrilogParentComment : (state, action) => produce(state, (draft) => {\r\n            draft.parent_comment.list = action.payload.results;\r\n            draft.parent_comment.is_last = action.payload.last;\r\n            draft.detail.information.commentNum += 1;\r\n        }),\r\n    },\r\n});\r\n\r\nconst getTrilogMain = (filter, keyword) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const page = getState().trilog.main.page;\r\n        fetch(`http://13.209.8.146/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(page === 1){\r\n                dispatch(setTrilogMain(data));\r\n            } else {\r\n                console.log('Add')\r\n                dispatch(setTrilogMainAdd(data));\r\n            }\r\n            \r\n            if(!data.last) {\r\n                dispatch(setTrilogMainPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogMainPage(1));\r\n            }\r\n        })\r\n        .catch(err => console.log(err, \"메인 error\"));\r\n    };\r\n};\r\n\r\nconst getTrilogMainFilter = (filter, keyword) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const page = 1;\r\n        fetch(`http://13.209.8.146/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(page === 1){\r\n                dispatch(setTrilogMain(data));\r\n            } else {\r\n                dispatch(setTrilogMainAdd(data));\r\n            }\r\n            \r\n            if(!data.last) {\r\n                dispatch(setTrilogMainPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogMainPage(1));\r\n            }\r\n        })\r\n        .catch(err => console.log(err, \"메인 필터 error\"));\r\n    };\r\n};\r\n\r\n\r\nconst getTrilogDetail = (id) => {\r\n    return async function (dispatch, getState, { history }) {\r\n        const page = getState().trilog.parent_comment.page;\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const detail = await fetch(`http://13.209.8.146/api/all/boards/detail/${id}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => data)\r\n        .catch(err => console.log(err, 'trilog detail'));\r\n\r\n        const comment = await fetch(`http://13.209.8.146/api/all/boards/comments/parents/${id}?page=1`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(!data.last) {\r\n                dispatch(setTrilogParentCommentPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogParentCommentPage(1));\r\n            }\r\n            return data;\r\n        })\r\n        .catch(err => console.log(err, 'trilog parent comment'));\r\n\r\n        dispatch(setTrilogDetail(detail));\r\n        dispatch(setTrilogParentComment(comment));\r\n    };\r\n};\r\n\r\nconst addTrilog = (trilog) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        if(trilog.is_edit) {\r\n            fetch(`http://13.209.8.146/api/boards/${trilog.id}`, {\r\n                method: 'PUT',\r\n                headers : {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'Authorization': `${access_token}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    title : trilog.title,\r\n                    address : trilog.address,\r\n                    description : trilog.description,\r\n                    imageUrlList : trilog.imageUrlList,\r\n                })\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                alert(data.msg);\r\n                history.replace('/trilog');\r\n            })\r\n            .catch(err => console.log(err, 'Trilog Edit'))\r\n        } else {\r\n            fetch('http://13.209.8.146/api/boards/', {\r\n                method: 'POST',\r\n                headers : {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'Authorization': `${access_token}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    title : trilog.title,\r\n                    address : trilog.address,\r\n                    description : trilog.description,\r\n                    imageUrlList : trilog.imageUrlList,\r\n                })\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                alert(data.msg);\r\n                history.replace('/trilog');\r\n            })\r\n            .catch(err => console.log(err, 'Trilog Add'))\r\n        }\r\n    };\r\n};\r\n\r\nconst setLikeTrilog = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`http://13.209.8.146/api/boards/like/${id}`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .catch(err => console.log(err, 'trilog like'));\r\n    };\r\n};\r\n\r\nconst setLikeTrilogDetail = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`http://13.209.8.146/api/boards/like/${id}`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .catch(err => console.log(err, 'trilog detail like'));\r\n\r\n        dispatch(setTrilogDetailLike());\r\n    };\r\n};\r\n\r\nconst getParentCommentScroll = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const page = getState().trilog.parent_comment.page;\r\n        fetch(`http://13.209.8.146/api/all/boards/comments/parents/${id}?page=${page}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(page === 1){\r\n                dispatch(setTrilogMain(data));\r\n            } else {\r\n                console.log('Add')\r\n                dispatch(setTrilogMainAdd(data));\r\n            }\r\n            \r\n            if(!data.last) {\r\n                dispatch(setTrilogParentCommentPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogParentCommentPage(1));\r\n            }\r\n        })\r\n        .catch(err => console.log(err, \"부모 댓글 스크롤 error\"));\r\n    }\r\n};\r\n\r\nconst addParentComment = (id, contents) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`http://13.209.8.146/api/boards/comments/parents/${id}`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            },\r\n            body: JSON.stringify({\r\n                contents: contents,\r\n            })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            dispatch(addTrilogParentComment(data));\r\n            alert('댓글 등록이 완료되었습니다.');\r\n        })\r\n        .catch(err => console.log(err, 'add comment trilog'));\r\n    };\r\n};\r\n\r\nconst getChildComment = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n\r\n        fetch(`http://13.209.8.146/api/all/boards/comments/children/${id}?page=1`, {\r\n            method : 'GET',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            },\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            dispatch(setTrilogChildComment(data));\r\n        })\r\n        .catch(err => console.log(err, 'get child comment trilog'));\r\n    };\r\n};\r\n\r\nconst addChildComment = (id, contents) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n\r\n        fetch(`http://13.209.8.146/api/boards/comments/children/${id}`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            },\r\n            body: JSON.stringify({\r\n                contents: contents,\r\n            })\r\n        }).then(res => res.json()).catch(err => console.log(err, 'child comment post'));\r\n\r\n    }\r\n}\r\n\r\nconst actionCreators = {\r\n    getTrilogMain,\r\n    getTrilogMainFilter,\r\n    getTrilogDetail,\r\n    addTrilog,\r\n    setLikeTrilog,\r\n    setLikeTrilogDetail,\r\n    addParentComment,\r\n    getChildComment,\r\n    addChildComment,\r\n    getParentCommentScroll,\r\n};\r\n\r\nexport const { setTrilogMain, setTrilogDetail, setTrilogMainPage, setTrilogMainAdd, setTrilogFilter, setTrilogParentComment, setTrilogDetailLike, setTrilogChildComment, addTrilogParentComment, setTrilogParentCommentPage } = trilogSlice.actions;\r\nexport default trilogSlice.reducer;\r\nexport { actionCreators };"]},"metadata":{},"sourceType":"module"}