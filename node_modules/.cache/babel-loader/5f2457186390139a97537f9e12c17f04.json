{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { produce } from 'immer'; // 불변성 유지\n\nimport { config } from \"./config\";\n/* Trilog - 트릴로그 */\n\nconst trilogSlice = createSlice({\n  name: \"trilog\",\n  initialState: {\n    main: {\n      list: [],\n      is_last: false,\n      page: 1,\n      filter: 'likeNum'\n    },\n    detail: {},\n    parent_comment: {\n      list: [],\n      is_last: false,\n      page: 1\n    },\n    loading: {\n      main_loading: true,\n      detail_loading: true\n    }\n  },\n  reducers: {\n    // Trilog 메인 페이지 - 내용 로딩 여부\n    setMainLoading: (state, action) => produce(state, draft => {\n      draft.loading.main_loading = action.payload;\n    }),\n    // Trilog 상세 페이지 - 내용 로딩 여부\n    setDetailLoading: (state, action) => produce(state, draft => {\n      draft.loading.detail_loading = action.payload;\n    }),\n    // Trilog 작성 페이지 - 게시글 작성\n    setTrilogMainAdd: (state, action) => produce(state, draft => {\n      draft.main.list = [...draft.main.list, ...action.payload.results];\n      draft.main.is_last = action.payload.last;\n    }),\n    // Trilog 메인 페이지 - 게시글 조회\n    setTrilogMain: (state, action) => produce(state, draft => {\n      draft.main.list = action.payload.results;\n      draft.main.is_last = action.payload.last;\n    }),\n    // Trilog 메인 페이지 - 필터 설정\n    setTrilogMainFilter: (state, action) => produce(state, draft => {\n      draft.main.filter = action.payload;\n    }),\n    // Trilog 메인 페이지 - 무한 스크롤 페이지 설정(다음 게시물이 있나 없나)\n    setTrilogMainPage: (state, action) => produce(state, draft => {\n      draft.main.page = action.payload;\n    }),\n    // Trilog 메인 페이지 - 게시글 좋아요\n    setTrilogLike: (state, action) => produce(state, draft => {\n      let idx = draft.main.list.findIndex(e => e.information.id === action.payload);\n      draft.main.list[idx].member.isLike = !draft.main.list[idx].member.isLike;\n    }),\n    // Trilog 상세 페이지 - 부모 댓글 페이징 설정(다음 부모 댓글 있나 없나)\n    setTrilogParentCommentPage: (state, action) => produce(state, draft => {\n      draft.parent_comment.page = action.payload;\n    }),\n    // Trilog 상세 페이지 - 해당 게시글 조회\n    setTrilogDetail: (state, action) => produce(state, draft => {\n      draft.detail = action.payload.results;\n    }),\n    // Trilog 상세 페이지 - 부모 댓글 조회\n    setTrilogParentComment: (state, action) => produce(state, draft => {\n      draft.parent_comment.list = action.payload.results;\n      draft.parent_comment.is_last = action.payload.last;\n    }),\n    // Trilog 상세 페이지 - 부모 댓글 페이징(다음 부모 댓글 조회)\n    addTrilogParentCommentScroll: (state, action) => produce(state, draft => {\n      draft.parent_comment.list = [...draft.parent_comment.list, ...action.payload.results];\n      draft.parent_comment.is_last = action.payload.last;\n    }),\n    // Trilog 상세 페이지 - 부모 댓글 수정\n    editTrilogParentComment: (state, action) => produce(state, draft => {\n      let idx = draft.parent_comment.list.findIndex(e => e.commentParent.id === action.payload.results.commentParent.id);\n      draft.parent_comment.list[idx].commentParent.contents = action.payload.results.commentParent.contents;\n      draft.parent_comment.list[idx].commentParent.modifiedAt = action.payload.results.commentParent.modifiedAt;\n    }),\n    // Trilog 상세 페이지 - 부모 댓글 삭제\n    removeTrilogParentComment: (state, action) => produce(state, draft => {\n      let idx = draft.parent_comment.list.findIndex(e => e.commentParent.id === action.payload);\n      draft.parent_comment.list.splice(idx, 1);\n    }),\n    // Trilog 상세 페이지 - 게시글 좋아요\n    setTrilogDetailLike: (state, action) => produce(state, draft => {\n      if (draft.detail.member.isLike) {\n        draft.detail.information.likeNum -= 1;\n      } else {\n        draft.detail.information.likeNum += 1;\n      }\n\n      draft.detail.member.isLike = !draft.detail.member.isLike;\n    }),\n    // Trilog 상세 페이지 - 부모 댓글 작성\n    addTrilogParentComment: (state, action) => produce(state, draft => {\n      draft.parent_comment.list = [...draft.parent_comment.list, action.payload.results];\n      draft.detail.information.commentNum += 1;\n    }),\n    // Trilog 상세 페이지 - 부모 댓글 좋아요\n    setTrilogParentCommentLike: (state, action) => produce(state, draft => {\n      let idx = draft.parent_comment.list.findIndex(e => e.commentParent.id === action.payload);\n\n      if (draft.parent_comment.list[idx].user.isLike) {\n        draft.parent_comment.list[idx].commentParent.likeNum -= 1;\n        draft.parent_comment.list[idx].user.isLike = !draft.parent_comment.list[idx].user.isLike;\n      } else {\n        draft.parent_comment.list[idx].commentParent.likeNum += 1;\n        draft.parent_comment.list[idx].user.isLike = !draft.parent_comment.list[idx].user.isLike;\n      }\n    })\n  }\n}); // Trilog 메인 게시물 조회\n\nconst getTrilogMain = (filter, keyword) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    dispatch(setMainLoading(true));\n    const access_token = localStorage.getItem(\"access_token\");\n    const page = getState().trilog.main.page;\n    fetch(`${config}/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (page === 1) {\n        dispatch(setTrilogMain(data));\n      } else {\n        dispatch(setTrilogMainAdd(data));\n      }\n\n      if (!data.last) {\n        dispatch(setTrilogMainPage(page + 1));\n      } else {\n        dispatch(setTrilogMainPage(1));\n      }\n    }).catch(err => console.log(err, \"메인 error\"));\n    dispatch(setMainLoading(false));\n  };\n}; // Trilog 메인 게시물 조회 - 필터 및 검색 적용시\n\n\nconst getTrilogMainFilter = (filter, keyword) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    dispatch(setMainLoading(true));\n    const access_token = localStorage.getItem(\"access_token\");\n    const page = 1;\n    fetch(`${config}/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (page === 1) {\n        dispatch(setTrilogMain(data));\n      } else {\n        dispatch(setTrilogMainAdd(data));\n      }\n\n      if (!data.last) {\n        dispatch(setTrilogMainPage(page + 1));\n      } else {\n        dispatch(setTrilogMainPage(1));\n      }\n    }).catch(err => console.log(err, \"메인 필터 error\"));\n    dispatch(setMainLoading(false));\n    dispatch(setTrilogMainFilter(filter));\n  };\n}; // Trilog 게시물 상세 조회\n\n\nconst getTrilogDetail = id => {\n  return async function (dispatch, getState, {\n    history\n  }) {\n    dispatch(setDetailLoading(true));\n    const page = getState().trilog.parent_comment.page;\n    const access_token = localStorage.getItem(\"access_token\");\n    const detail = await fetch(`${config}/api/all/boards/detail/${id}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => data).catch(err => console.log(err, 'trilog detail'));\n    const comment = await fetch(`${config}/api/all/boards/comments/parents/${id}?page=1`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (!data.last) {\n        dispatch(setTrilogParentCommentPage(page + 1));\n      } else {\n        dispatch(setTrilogParentCommentPage(1));\n      }\n\n      return data;\n    }).catch(err => console.log(err, 'trilog parent comment'));\n    dispatch(setTrilogDetail(detail));\n    dispatch(setTrilogParentComment(comment));\n    dispatch(setDetailLoading(false));\n  };\n}; // Trilog 메인 게시물 등록\n\n\nconst addTrilog = trilog => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n\n    if (trilog.is_edit) {\n      console.log('edit called');\n      fetch(`${config}/api/boards/${trilog.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'Authorization': `${access_token}`\n        },\n        body: JSON.stringify({\n          title: trilog.title,\n          address: trilog.address,\n          description: trilog.description,\n          imageUrlList: trilog.imageUrlList\n        })\n      }).then(res => res.json()).then(data => {\n        alert(data.msg);\n        history.replace('/trilog');\n      }).catch(err => console.log(err, 'Trilog Edit'));\n    } else {\n      fetch(`${config}/api/boards/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'Authorization': `${access_token}`\n        },\n        body: JSON.stringify({\n          title: trilog.title,\n          address: trilog.address,\n          description: trilog.description,\n          imageUrlList: trilog.imageUrlList\n        })\n      }).then(res => res.json()).then(data => {\n        alert(data.msg);\n        history.replace('/trilog');\n      }).catch(err => console.log(err, 'Trilog Add'));\n    }\n  };\n}; // Trilog 메인 게시물 삭제\n\n\nconst removeTrilog = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`${config}/api/boards/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      alert(data.msg);\n      history.replace('/trilog');\n    }).catch(err => console.log(err, 'Trilog Delete'));\n  };\n}; // Trilog 메인 게시물 좋아요\n\n\nconst setLikeTrilog = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`${config}/api/boards/like/${id}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data.status === 401) {\n        alert('로그인을 먼저 하세요!');\n      } else {\n        dispatch(setTrilogLike(id));\n      }\n    }).catch(err => console.log(err, 'trilog like'));\n  };\n}; // Trilog 상세 게시물 좋아요\n\n\nconst setLikeTrilogDetail = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`${config}/api/boards/like/${id}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data.status === 401) {\n        alert('로그인을 먼저 하세요!');\n      } else {\n        dispatch(setTrilogDetailLike());\n      }\n    }).catch(err => console.log(err, 'trilog detail like'));\n  };\n}; // Trilog 상세 게시물 - 부모 댓글 더 보기\n\n\nconst getParentCommentScroll = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    const page = getState().trilog.parent_comment.page;\n    fetch(`${config}/api/all/boards/comments/parents/${id}?page=${page}`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      console.log(data, 'data');\n\n      if (!data.last) {\n        dispatch(setTrilogParentCommentPage(page + 1));\n      } else {\n        dispatch(setTrilogParentCommentPage(1));\n      }\n\n      dispatch(addTrilogParentCommentScroll(data));\n    }).catch(err => console.log(err, \"parent comment scroll error\"));\n  };\n}; // Trilog 상세 게시물 - 부모 댓글 추가\n\n\nconst addParentComment = (id, contents) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`${config}/api/boards/comments/parents/${id}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      },\n      body: JSON.stringify({\n        contents: contents\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch(addTrilogParentComment(data));\n      alert(data.msg);\n    }).catch(err => console.log(err, 'add comment trilog'));\n  };\n}; // Trilog 상세 게시물 - 부모 댓글 수정\n\n\nconst editParentComment = (id, contents) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`${config}/api/boards/comments/parents/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      },\n      body: JSON.stringify({\n        contents: contents\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch(editTrilogParentComment(data));\n      alert(data.msg);\n    }).catch(err => console.log(err, 'edit comment trilog'));\n  };\n}; // Trilog 상세 게시물 - 부모 댓글 삭제\n\n\nconst removeParentComment = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`${config}/api/boards/comments/parents/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      dispatch(removeTrilogParentComment(id));\n      alert(data.msg);\n    }).catch(err => console.log(err, 'remove comment trilog'));\n  };\n}; // Trilog 상세 게시물 - 부모 댓글 좋아요\n\n\nconst setParentCommentLike = id => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const access_token = localStorage.getItem(\"access_token\");\n    const api = `${config}/api/boards/comments/parents/like/${id}`;\n    fetch(api, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      dispatch(setTrilogParentCommentLike(id));\n    }).catch(err => console.log(err, 'comment like'));\n  };\n};\n\nconst actionCreators = {\n  getTrilogMain,\n  // Trilog 메인 게시물 조회\n  getTrilogMainFilter,\n  // Trilog 메인 게시물 조회 - 필터 및 검색 적용시\n  getTrilogDetail,\n  // Trilog 게시물 상세 조회\n  addTrilog,\n  // Trilog 메인 게시물 등록\n  removeTrilog,\n  // Trilog 메인 게시물 삭제\n  setLikeTrilog,\n  // Trilog 메인 게시물 좋아요\n  setLikeTrilogDetail,\n  // Trilog 상세 게시물 좋아요\n  getParentCommentScroll,\n  // Trilog 상세 게시물 - 부모 댓글 더 보기\n  addParentComment,\n  // Trilog 상세 게시물 - 부모 댓글 추가\n  editParentComment,\n  // Trilog 상세 게시물 - 부모 댓글 수정\n  removeParentComment,\n  // Trilog 상세 게시물 - 부모 댓글 삭제\n  setParentCommentLike // Trilog 상세 게시물 - 부모 댓글 좋아요\n\n};\nexport const {\n  setMainLoading,\n  // Trilog 메인 페이지 - 내용 로딩 여부\n  setDetailLoading,\n  // Trilog 상세 페이지 - 내용 로딩 여부\n  setTrilogMainAdd,\n  // Trilog 작성 페이지 - 게시글 작성\n  setTrilogMain,\n  // Trilog 메인 페이지 - 게시글 조회\n  setTrilogMainFilter,\n  // Trilog 메인 페이지 - 필터 설정\n  setTrilogMainPage,\n  // Trilog 메인 페이지 - 무한 스크롤 페이지 설정(다음 게시물이 있나 없나)\n  setTrilogLike,\n  // Trilog 메인 페이지 - 게시글 좋아요\n  setTrilogParentCommentPage,\n  // Trilog 상세 페이지 - 부모 댓글 페이징 설정(다음 부모 댓글 있나 없나)\n  setTrilogDetail,\n  // Trilog 상세 페이지 - 해당 게시글 조회\n  setTrilogParentComment,\n  // Trilog 상세 페이지 - 부모 댓글 조회\n  addTrilogParentCommentScroll,\n  // Trilog 상세 페이지 - 부모 댓글 페이징(다음 부모 댓글 조회)\n  editTrilogParentComment,\n  // Trilog 상세 페이지 - 부모 댓글 수정\n  removeTrilogParentComment,\n  // Trilog 상세 페이지 - 부모 댓글 삭제\n  setTrilogDetailLike,\n  // Trilog 상세 페이지 - 게시글 좋아요\n  addTrilogParentComment,\n  // Trilog 상세 페이지 - 부모 댓글 작성\n  setTrilogParentCommentLike // Trilog 상세 페이지 - 부모 댓글 좋아요\n\n} = trilogSlice.actions;\nexport default trilogSlice.reducer;\nexport { actionCreators };","map":{"version":3,"sources":["/Users/parkminkyung/Desktop/git/triport/src/redux/modules/trilog.js"],"names":["createSlice","produce","config","trilogSlice","name","initialState","main","list","is_last","page","filter","detail","parent_comment","loading","main_loading","detail_loading","reducers","setMainLoading","state","action","draft","payload","setDetailLoading","setTrilogMainAdd","results","last","setTrilogMain","setTrilogMainFilter","setTrilogMainPage","setTrilogLike","idx","findIndex","e","information","id","member","isLike","setTrilogParentCommentPage","setTrilogDetail","setTrilogParentComment","addTrilogParentCommentScroll","editTrilogParentComment","commentParent","contents","modifiedAt","removeTrilogParentComment","splice","setTrilogDetailLike","likeNum","addTrilogParentComment","commentNum","setTrilogParentCommentLike","user","getTrilogMain","keyword","dispatch","getState","history","access_token","localStorage","getItem","trilog","fetch","method","headers","then","res","json","data","catch","err","console","log","getTrilogMainFilter","getTrilogDetail","comment","addTrilog","is_edit","body","JSON","stringify","title","address","description","imageUrlList","alert","msg","replace","removeTrilog","setLikeTrilog","status","setLikeTrilogDetail","getParentCommentScroll","addParentComment","editParentComment","removeParentComment","setParentCommentLike","api","actionCreators","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { produce } from 'immer'; // 불변성 유지\r\nimport { config } from \"./config\";\r\n\r\n/* Trilog - 트릴로그 */\r\nconst trilogSlice = createSlice({\r\n    name : \"trilog\",\r\n    initialState : {\r\n        main : {\r\n            list : [],\r\n            is_last : false,\r\n            page : 1,\r\n            filter : 'likeNum',\r\n        },\r\n        detail : {},\r\n        parent_comment : {\r\n            list : [],\r\n            is_last : false,\r\n            page : 1\r\n        },\r\n        loading : {\r\n            main_loading : true,\r\n            detail_loading : true,\r\n        }\r\n    },\r\n    reducers: {\r\n        // Trilog 메인 페이지 - 내용 로딩 여부\r\n        setMainLoading : (state, action) => produce(state, (draft) => {\r\n            draft.loading.main_loading = action.payload;\r\n        }),\r\n        // Trilog 상세 페이지 - 내용 로딩 여부\r\n        setDetailLoading : (state, action) => produce(state, (draft) => {\r\n            draft.loading.detail_loading = action.payload;\r\n        }),\r\n        // Trilog 작성 페이지 - 게시글 작성\r\n        setTrilogMainAdd : (state, action) => produce(state, (draft) => {\r\n            draft.main.list = [...draft.main.list, ...action.payload.results];\r\n            draft.main.is_last = action.payload.last;\r\n        }),\r\n        // Trilog 메인 페이지 - 게시글 조회\r\n        setTrilogMain : (state, action) => produce(state, (draft) => {\r\n            draft.main.list = action.payload.results;\r\n            draft.main.is_last = action.payload.last;\r\n        }),\r\n        // Trilog 메인 페이지 - 필터 설정\r\n        setTrilogMainFilter : (state, action) => produce(state, (draft) => {\r\n            draft.main.filter = action.payload;\r\n        }),\r\n        // Trilog 메인 페이지 - 무한 스크롤 페이지 설정(다음 게시물이 있나 없나)\r\n        setTrilogMainPage : (state, action) => produce(state, (draft) => {\r\n            draft.main.page = action.payload;\r\n        }),\r\n        // Trilog 메인 페이지 - 게시글 좋아요\r\n        setTrilogLike : (state, action) => produce(state, (draft) => {\r\n            let idx = draft.main.list.findIndex((e) => e.information.id === action.payload);\r\n            draft.main.list[idx].member.isLike = !draft.main.list[idx].member.isLike;\r\n        }),\r\n        // Trilog 상세 페이지 - 부모 댓글 페이징 설정(다음 부모 댓글 있나 없나)\r\n        setTrilogParentCommentPage : (state, action) => produce(state, (draft) => {\r\n            draft.parent_comment.page = action.payload;\r\n        }),\r\n        // Trilog 상세 페이지 - 해당 게시글 조회\r\n        setTrilogDetail : (state, action) => produce(state, (draft) => {\r\n            draft.detail = action.payload.results;\r\n        }),\r\n        // Trilog 상세 페이지 - 부모 댓글 조회\r\n        setTrilogParentComment : (state, action) => produce(state, (draft) => {\r\n            draft.parent_comment.list = action.payload.results;\r\n            draft.parent_comment.is_last = action.payload.last;\r\n        }),\r\n        // Trilog 상세 페이지 - 부모 댓글 페이징(다음 부모 댓글 조회)\r\n        addTrilogParentCommentScroll : (state, action) => produce(state, (draft) => {\r\n            draft.parent_comment.list = [...draft.parent_comment.list, ...action.payload.results];\r\n            draft.parent_comment.is_last = action.payload.last;\r\n        }),\r\n        // Trilog 상세 페이지 - 부모 댓글 수정\r\n        editTrilogParentComment : (state, action) => produce(state, (draft) => {\r\n            let idx = draft.parent_comment.list.findIndex((e) => e.commentParent.id === action.payload.results.commentParent.id);\r\n            draft.parent_comment.list[idx].commentParent.contents = action.payload.results.commentParent.contents;\r\n            draft.parent_comment.list[idx].commentParent.modifiedAt = action.payload.results.commentParent.modifiedAt;\r\n        }),\r\n        // Trilog 상세 페이지 - 부모 댓글 삭제\r\n        removeTrilogParentComment : (state, action) => produce(state, (draft) => {\r\n            let idx = draft.parent_comment.list.findIndex((e) => e.commentParent.id === action.payload);\r\n            draft.parent_comment.list.splice(idx, 1);\r\n        }),\r\n        // Trilog 상세 페이지 - 게시글 좋아요\r\n        setTrilogDetailLike : (state, action) => produce(state, (draft) => {\r\n            if(draft.detail.member.isLike){\r\n                draft.detail.information.likeNum -= 1;\r\n            } else {\r\n                draft.detail.information.likeNum += 1;\r\n            }\r\n            \r\n            draft.detail.member.isLike = !draft.detail.member.isLike;\r\n        }),\r\n        // Trilog 상세 페이지 - 부모 댓글 작성\r\n        addTrilogParentComment : (state, action) => produce(state, (draft) => {\r\n            draft.parent_comment.list = [...draft.parent_comment.list, action.payload.results];\r\n            draft.detail.information.commentNum += 1;\r\n        }),\r\n        // Trilog 상세 페이지 - 부모 댓글 좋아요\r\n        setTrilogParentCommentLike: (state, action) => produce(state, (draft) => {\r\n            let idx = draft.parent_comment.list.findIndex((e) => e.commentParent.id === action.payload);\r\n            if(draft.parent_comment.list[idx].user.isLike){\r\n                draft.parent_comment.list[idx].commentParent.likeNum -= 1;\r\n                draft.parent_comment.list[idx].user.isLike = !draft.parent_comment.list[idx].user.isLike;\r\n            } else {\r\n                draft.parent_comment.list[idx].commentParent.likeNum += 1;\r\n                draft.parent_comment.list[idx].user.isLike = !draft.parent_comment.list[idx].user.isLike;\r\n            }\r\n        }),\r\n    },\r\n});\r\n\r\n// Trilog 메인 게시물 조회\r\nconst getTrilogMain = (filter, keyword) => {\r\n    return function (dispatch, getState, { history }) {\r\n        dispatch(setMainLoading(true));\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const page = getState().trilog.main.page;\r\n        fetch(`${config}/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(page === 1){\r\n                dispatch(setTrilogMain(data));\r\n            } else {\r\n                dispatch(setTrilogMainAdd(data));\r\n            }\r\n            \r\n            if(!data.last) {\r\n                dispatch(setTrilogMainPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogMainPage(1));\r\n            }\r\n        })\r\n        .catch(err => console.log(err, \"메인 error\"));\r\n        dispatch(setMainLoading(false));\r\n    };\r\n};\r\n\r\n// Trilog 메인 게시물 조회 - 필터 및 검색 적용시\r\nconst getTrilogMainFilter = (filter, keyword) => {\r\n    return function (dispatch, getState, { history }) {\r\n        dispatch(setMainLoading(true));\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const page = 1;\r\n        fetch(`${config}/api/all/boards?page=${page}&filter=${filter}&keyword=${keyword}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(page === 1){\r\n                dispatch(setTrilogMain(data));\r\n            } else {\r\n                dispatch(setTrilogMainAdd(data));\r\n            }\r\n            \r\n            if(!data.last) {\r\n                dispatch(setTrilogMainPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogMainPage(1));\r\n            }\r\n        })\r\n        .catch(err => console.log(err, \"메인 필터 error\"));\r\n\r\n        dispatch(setMainLoading(false));\r\n        dispatch(setTrilogMainFilter(filter));\r\n    };\r\n};\r\n\r\n// Trilog 게시물 상세 조회\r\nconst getTrilogDetail = (id) => {\r\n    return async function (dispatch, getState, { history }) {\r\n        dispatch(setDetailLoading(true));\r\n        const page = getState().trilog.parent_comment.page;\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const detail = await fetch(`${config}/api/all/boards/detail/${id}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => data)\r\n        .catch(err => console.log(err, 'trilog detail'));\r\n\r\n        const comment = await fetch(`${config}/api/all/boards/comments/parents/${id}?page=1`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(!data.last) {\r\n                dispatch(setTrilogParentCommentPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogParentCommentPage(1));\r\n            }\r\n            return data;\r\n        })\r\n        .catch(err => console.log(err, 'trilog parent comment'));\r\n\r\n        dispatch(setTrilogDetail(detail));\r\n        dispatch(setTrilogParentComment(comment));\r\n        dispatch(setDetailLoading(false));\r\n    };\r\n};\r\n\r\n// Trilog 메인 게시물 등록\r\nconst addTrilog = (trilog) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        if(trilog.is_edit) {\r\n            console.log('edit called')\r\n            fetch(`${config}/api/boards/${trilog.id}`, {\r\n                method: 'PUT',\r\n                headers : {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'Authorization': `${access_token}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    title : trilog.title,\r\n                    address : trilog.address,\r\n                    description : trilog.description,\r\n                    imageUrlList : trilog.imageUrlList,\r\n                })\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                alert(data.msg);\r\n                history.replace('/trilog');\r\n            })\r\n            .catch(err => console.log(err, 'Trilog Edit'))\r\n        } else {\r\n            fetch(`${config}/api/boards/`, {\r\n                method: 'POST',\r\n                headers : {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'Authorization': `${access_token}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    title : trilog.title,\r\n                    address : trilog.address,\r\n                    description : trilog.description,\r\n                    imageUrlList : trilog.imageUrlList,\r\n                })\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                alert(data.msg);\r\n                history.replace('/trilog');\r\n            })\r\n            .catch(err => console.log(err, 'Trilog Add'))\r\n        }\r\n    };\r\n};\r\n\r\n// Trilog 메인 게시물 삭제\r\nconst removeTrilog = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`${config}/api/boards/${id}`, {\r\n            method: 'DELETE',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            alert(data.msg);\r\n            history.replace('/trilog');\r\n        })\r\n        .catch(err => console.log(err, 'Trilog Delete'))\r\n    };\r\n};\r\n\r\n// Trilog 메인 게시물 좋아요\r\nconst setLikeTrilog = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`${config}/api/boards/like/${id}`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(data.status === 401){\r\n                alert('로그인을 먼저 하세요!');\r\n            } else {\r\n                dispatch(setTrilogLike(id));\r\n            }\r\n        })\r\n        .catch(err => console.log(err, 'trilog like'));\r\n    };\r\n};\r\n\r\n// Trilog 상세 게시물 좋아요\r\nconst setLikeTrilogDetail = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`${config}/api/boards/like/${id}`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(data.status === 401){\r\n                alert('로그인을 먼저 하세요!');\r\n            } else {\r\n                dispatch(setTrilogDetailLike());\r\n            }\r\n        })\r\n        .catch(err => console.log(err, 'trilog detail like'));\r\n    };\r\n};\r\n\r\n// Trilog 상세 게시물 - 부모 댓글 더 보기\r\nconst getParentCommentScroll = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const page = getState().trilog.parent_comment.page;\r\n        fetch(`${config}/api/all/boards/comments/parents/${id}?page=${page}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization' : `${access_token}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {     \r\n            console.log(data, 'data');\r\n            if(!data.last) {\r\n                dispatch(setTrilogParentCommentPage(page + 1));\r\n            } else {\r\n                dispatch(setTrilogParentCommentPage(1));\r\n            }\r\n\r\n            dispatch(addTrilogParentCommentScroll(data));\r\n        })\r\n        .catch(err => console.log(err, \"parent comment scroll error\"));\r\n    }\r\n};\r\n\r\n// Trilog 상세 게시물 - 부모 댓글 추가\r\nconst addParentComment = (id, contents) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`${config}/api/boards/comments/parents/${id}`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            },\r\n            body: JSON.stringify({\r\n                contents: contents,\r\n            })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            dispatch(addTrilogParentComment(data));\r\n            alert(data.msg);\r\n        })\r\n        .catch(err => console.log(err, 'add comment trilog'));\r\n    };\r\n};\r\n\r\n// Trilog 상세 게시물 - 부모 댓글 수정\r\nconst editParentComment = (id, contents) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`${config}/api/boards/comments/parents/${id}`, {\r\n            method : 'PUT',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            },\r\n            body: JSON.stringify({\r\n                contents: contents,\r\n            })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            dispatch(editTrilogParentComment(data));\r\n            alert(data.msg);\r\n        })\r\n        .catch(err => console.log(err, 'edit comment trilog'));\r\n    };\r\n};\r\n\r\n// Trilog 상세 게시물 - 부모 댓글 삭제\r\nconst removeParentComment = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`${config}/api/boards/comments/parents/${id}`, {\r\n            method : 'DELETE',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            dispatch(removeTrilogParentComment(id));\r\n            alert(data.msg);\r\n        })\r\n        .catch(err => console.log(err, 'remove comment trilog'));\r\n    };\r\n};\r\n\r\n// Trilog 상세 게시물 - 부모 댓글 좋아요\r\nconst setParentCommentLike = (id) => {\r\n    return function (dispatch, getState, { history }) {\r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        const api = `${config}/api/boards/comments/parents/like/${id}`;\r\n\r\n        fetch(api, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            },\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            dispatch(setTrilogParentCommentLike(id));\r\n        })\r\n        .catch(err => console.log(err, 'comment like'));\r\n    };\r\n};\r\n\r\n\r\nconst actionCreators = {\r\n    getTrilogMain, // Trilog 메인 게시물 조회\r\n    getTrilogMainFilter, // Trilog 메인 게시물 조회 - 필터 및 검색 적용시\r\n    getTrilogDetail, // Trilog 게시물 상세 조회\r\n    addTrilog, // Trilog 메인 게시물 등록\r\n    removeTrilog, // Trilog 메인 게시물 삭제\r\n    setLikeTrilog, // Trilog 메인 게시물 좋아요\r\n    setLikeTrilogDetail, // Trilog 상세 게시물 좋아요\r\n    getParentCommentScroll, // Trilog 상세 게시물 - 부모 댓글 더 보기\r\n    addParentComment, // Trilog 상세 게시물 - 부모 댓글 추가\r\n    editParentComment, // Trilog 상세 게시물 - 부모 댓글 수정\r\n    removeParentComment, // Trilog 상세 게시물 - 부모 댓글 삭제\r\n    setParentCommentLike, // Trilog 상세 게시물 - 부모 댓글 좋아요\r\n};\r\n\r\nexport const { \r\n    setMainLoading, // Trilog 메인 페이지 - 내용 로딩 여부\r\n    setDetailLoading, // Trilog 상세 페이지 - 내용 로딩 여부\r\n    setTrilogMainAdd, // Trilog 작성 페이지 - 게시글 작성\r\n    setTrilogMain, // Trilog 메인 페이지 - 게시글 조회\r\n    setTrilogMainFilter, // Trilog 메인 페이지 - 필터 설정\r\n    setTrilogMainPage, // Trilog 메인 페이지 - 무한 스크롤 페이지 설정(다음 게시물이 있나 없나)\r\n    setTrilogLike, // Trilog 메인 페이지 - 게시글 좋아요\r\n    setTrilogParentCommentPage, // Trilog 상세 페이지 - 부모 댓글 페이징 설정(다음 부모 댓글 있나 없나)\r\n    setTrilogDetail, // Trilog 상세 페이지 - 해당 게시글 조회\r\n    setTrilogParentComment, // Trilog 상세 페이지 - 부모 댓글 조회\r\n    addTrilogParentCommentScroll, // Trilog 상세 페이지 - 부모 댓글 페이징(다음 부모 댓글 조회)\r\n    editTrilogParentComment, // Trilog 상세 페이지 - 부모 댓글 수정\r\n    removeTrilogParentComment, // Trilog 상세 페이지 - 부모 댓글 삭제\r\n    setTrilogDetailLike, // Trilog 상세 페이지 - 게시글 좋아요\r\n    addTrilogParentComment, // Trilog 상세 페이지 - 부모 댓글 작성\r\n    setTrilogParentCommentLike, // Trilog 상세 페이지 - 부모 댓글 좋아요\r\n} = trilogSlice.actions;\r\nexport default trilogSlice.reducer;\r\nexport { actionCreators };"]},"metadata":{},"sourceType":"module"}