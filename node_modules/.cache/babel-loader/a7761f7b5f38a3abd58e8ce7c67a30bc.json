{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/parkminkyung/Desktop/git/triport/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _toConsumableArray from\"/Users/parkminkyung/Desktop/git/triport/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/parkminkyung/Desktop/git/triport/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12;import React,{useRef,useState}from\"react\";import styled from\"styled-components\";import ClearIcon from\"@material-ui/icons/Clear\";import{useDispatch}from\"react-redux\";import{TrilsActions}from\"redux/modules/trils\";import afterImg from\"../media/image/afterupload.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TrilsWrite=function TrilsWrite(props){// const { history } = props;\nvar tagInput=useRef(null);var fileInput=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tags=_useState2[0],setTags=_useState2[1];var dispatch=useDispatch();var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),vid=_useState4[0],setVid=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),tagType=_useState6[0],setTagType=_useState6[1];// const is_login = useSelector((state) => state.user.is_login);\n// useEffect(() => {\n//   if (!is_login) {\n//     alert(\"로그인을 해주세요\");\n//     history.replace(\"/\");\n//   }\n// }, [is_login, history]);\nvar removeTag=function removeTag(i){var newTags=_toConsumableArray(tags);newTags.splice(i,1);setTags(_toConsumableArray(newTags));};var InputKeyDown=function InputKeyDown(e){var val=e.target.value;if(e.key===\"Enter\"&&val||e.key===\",\"&&val||e.key===\" \"&&val){if(tags.length===3){alert(\"태그는 최대 3개까지 가능합니다.\");return;}if(tags.find(function(tag){return tag.toLowerCase()===val.toLowerCase();})){return;}setTagType(\"\");setTags([].concat(_toConsumableArray(tags),[val]));}else if(e.key===\"Backspace\"&&!val){removeTag(tags.length-1);}};var post=function post(){if(vid===undefined||vid==null){alert(\"영상을 업로드해주세요\");return;}if(tags.length===0){alert(\"태그를 1개 이상 작성해주세요\");return;}dispatch(TrilsActions.writepost(vid,tags));};var upload=function upload(e){var reader=new FileReader();var file=fileInput.current.files[0];if(!file){return;}if(file.size*9.5367e-7>50){alert(\"용량이 너무 큽니다.(50mb 이하)\");return;}reader.onloadstart=function(e){setVid(null);};reader.readAsDataURL(file);reader.onloadend=function(e){setVid(file);};};var triggerVideo=function triggerVideo(){fileInput.current.click();// 인풋 클릭한 효과\n};var change=function change(e){if(e.target.value.length>10){e.target.value=e.target.value.substr(0,10);}var curValue=e.target.value;// const regExp = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"\\s]/gi;\nvar regExp=/[{}[\\]/?.,;:|)*~`!^\\-_+<>@#$%&\\\\=('\"\\s]/gi;var newValue=curValue.replace(regExp,\"\");setTagType(newValue);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Wrap,{children:[/*#__PURE__*/_jsxs(VideoView,{onClick:triggerVideo,children:[!(vid===null)?/*#__PURE__*/_jsx(Uploading,{src:afterImg}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"25px\"},children:\"\\uC601\\uC0C1\\uC744 \\uC5C5\\uB85C\\uB4DC\\uD574\\uC8FC\\uC138\\uC694.(\\uD074\\uB9AD)\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"15px\"},children:\"\\uC601\\uC0C1 \\uAE38\\uC774 10\\uCD08 \\uC774\\uD558, \\uD06C\\uAE30 50MB \\uC774\\uD558\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"video/*\",ref:fileInput,onChange:upload,style:{display:\"none\"}})]}),/*#__PURE__*/_jsx(Text,{children:tags.map(function(tag,i){return/*#__PURE__*/_jsxs(Li,{children:[tag,/*#__PURE__*/_jsx(Libutton,{type:\"button\",onClick:function onClick(){removeTag(i);},children:/*#__PURE__*/_jsx(IconCover,{children:/*#__PURE__*/_jsx(ClearIcon,{})})})]},tag);})}),/*#__PURE__*/_jsx(Tag,{children:\"\\uD0DC\\uADF8 (\\uCD5C\\uB300 3\\uAC1C)\"}),/*#__PURE__*/_jsx(InputTag,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",maxLength:10,value:tagType,onKeyDown:InputKeyDown,ref:tagInput,placeholder:\"# \\uC790\\uC720\\uB86D\\uAC8C \\uC801\\uACE0 \\uC5D4\\uD130\\uB97C \\uB20C\\uB7EC\\uC8FC\\uC138\\uC694.(10\\uC790 \\uC81C\\uD55C)\",onChange:change})})]}),/*#__PURE__*/_jsxs(ButtonWrap,{children:[/*#__PURE__*/_jsx(Button,{onClick:post,children:\"\\uC791\\uC131\\uC644\\uB8CC\"}),/*#__PURE__*/_jsx(Button,{children:\"\\uCDE8\\uC18C\"})]})]});};var Uploading=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  height: 100%;\\n  width: 100%;\\n  margin: 0 auto;\\n  background-image: url(\\\"\",\"\\\");\\n  background-color: #ededed;\\n  background-size: contain;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n\"])),function(props){return props.src;});var IconCover=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  & svg {\\n    width: 1rem;\\n  }\\n\"])));var Libutton=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  align-items: center;\\n  appearance: none;\\n  background: #333333;\\n  border: none;\\n  border-radius: 50%;\\n  color: white;\\n  cursor: pointer;\\n  font-size: 12px;\\n  height: 15px;\\n  justify-content: center;\\n  line-height: 0;\\n  margin-left: 8px;\\n  padding: 0;\\n  width: 15px;\\n  outline: 0;\\n\"])));var Li=styled.li(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-family: \\\"AppleSDGothicNeoR\\\";\\n  align-items: center;\\n  background: #40c7c3;\\n  border-radius: 5px;\\n  color: white;\\n  display: flex;\\n  font-weight: 300;\\n  list-style: none;\\n  margin-bottom: 5px;\\n  margin-top: 5px;\\n  margin-left: 8px;\\n  padding: 5px 10px;\\n\"])));var InputTag=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 37rem;\\n  height: auto;\\n  border: 1px solid #2b61e1;\\n  border-radius: 5px;\\n  display: inline-flex;\\n  flex-wrap: wrap;\\n  justify-content: flex-start;\\n  margin: 0px auto;\\n  padding: 5px;\\n  @media (max-width: 600px) {\\n    width: calc(100% - 20px);\\n  }\\n\"])));var Wrap=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-family: \\\"paybooc-Bold\\\";\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n\"])));var VideoView=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  z-index: 5;\\n  width: 37rem;\\n  height: 28rem;\\n  margin: 0px auto;\\n  box-shadow: 0px 3px 6px #00000029;\\n  border: 1px solid #2b61e1;\\n  border-radius: 5px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  color: #2b61e1;\\n  margin-top: 1rem;\\n  @media only screen and (max-width: 630px) {\\n    width: calc(100% - 20px);\\n    height: 20rem;\\n  }\\n\"])));var Text=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  width: 37rem;\\n  font-family: \\\"AppleSDGothicNeoR\\\";\\n  font-size: 15px;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin: 0px auto;\\n  margin-top: 1rem;\\n  margin-bottom: 2rem;\\n  @media (max-width: 600px) {\\n    width: calc(100% - 20px);\\n  }\\n\"])));var Tag=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  width: 37rem;\\n  color: #2b61e1;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin: 0px auto;\\n  margin-bottom: 1rem;\\n  @media (max-width: 600px) {\\n    width: calc(100% - 20px);\\n  }\\n\"])));var Input=styled.input(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  outline: none;\\n  width: 35rem;\\n  height: 2.5rem;\\n  border: 0;\\n  border-radius: 5px;\\n  display: flex;\\n  justify-content: flex-start;\\n  /* margin: 0px auto; */\\n  padding-left: 0.5rem;\\n  padding-right: 0.5rem;\\n  font-size: 1rem;\\n  @media (max-width: 600px) {\\n    width: 100%;\\n  }\\n\"])));var ButtonWrap=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  width: 40rem;\\n  margin: 0px auto;\\n  margin-top: 2rem;\\n  margin-bottom: 2rem;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  @media only screen and (max-width: 860px) {\\n    flex-direction: column;\\n    margin-top: 1rem;\\n    width: 100%;\\n  }\\n\"])));var Button=styled.button(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  font-family: \\\"paybooc-Bold\\\";\\n  color: #ffffff;\\n  font-size: 1rem;\\n  width: 15rem;\\n  height: 3rem;\\n  background-color: \",\";\\n  box-shadow: 0px 3px 6px #00000029;\\n  border: 1px solid;\\n  border-color: \",\";\\n  border-radius: 5px;\\n  @media only screen and (max-width: 860px) {\\n    margin: 5px auto;\\n  }\\n\"])),function(props){return props.ok?\"#2b61e1\":\"#707070\";},function(props){return props.ok?\"#2b61e1\":\"#707070\";});export default TrilsWrite;","map":{"version":3,"sources":["/Users/parkminkyung/Desktop/git/triport/src/pages/TrilsWrite.js"],"names":["React","useRef","useState","styled","ClearIcon","useDispatch","TrilsActions","afterImg","TrilsWrite","props","tagInput","fileInput","tags","setTags","dispatch","vid","setVid","tagType","setTagType","removeTag","i","newTags","splice","InputKeyDown","e","val","target","value","key","length","alert","find","tag","toLowerCase","post","undefined","writepost","upload","reader","FileReader","file","current","files","size","onloadstart","readAsDataURL","onloadend","triggerVideo","click","change","substr","curValue","regExp","newValue","replace","fontSize","display","map","Uploading","div","src","IconCover","Libutton","Li","li","InputTag","Wrap","VideoView","Text","Tag","Input","input","ButtonWrap","Button","button","ok"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport { useDispatch } from \"react-redux\";\nimport { TrilsActions } from \"redux/modules/trils\";\nimport afterImg from \"../media/image/afterupload.png\";\n\nconst TrilsWrite = (props) => {\n  // const { history } = props;\n  const tagInput = useRef(null);\n  const fileInput = useRef();\n  const [tags, setTags] = useState([]);\n  const dispatch = useDispatch();\n  const [vid, setVid] = useState(null);\n  const [tagType, setTagType] = useState(\"\");\n  // const is_login = useSelector((state) => state.user.is_login);\n\n  // useEffect(() => {\n  //   if (!is_login) {\n  //     alert(\"로그인을 해주세요\");\n  //     history.replace(\"/\");\n  //   }\n  // }, [is_login, history]);\n\n  const removeTag = (i) => {\n    const newTags = [...tags];\n    newTags.splice(i, 1);\n    setTags([...newTags]);\n  };\n\n  const InputKeyDown = (e) => {\n    const val = e.target.value;\n    if (\n      (e.key === \"Enter\" && val) ||\n      (e.key === \",\" && val) ||\n      (e.key === \" \" && val)\n    ) {\n      if (tags.length === 3) {\n        alert(\"태그는 최대 3개까지 가능합니다.\");\n        return;\n      }\n      if (tags.find((tag) => tag.toLowerCase() === val.toLowerCase())) {\n        return;\n      }\n      setTagType(\"\");\n      setTags([...tags, val]);\n    } else if (e.key === \"Backspace\" && !val) {\n      removeTag(tags.length - 1);\n    }\n  };\n\n  const post = () => {\n    if (vid === undefined || vid == null) {\n      alert(\"영상을 업로드해주세요\");\n      return;\n    }\n    if (tags.length === 0) {\n      alert(\"태그를 1개 이상 작성해주세요\");\n      return;\n    }\n    dispatch(TrilsActions.writepost(vid, tags));\n  };\n\n  const upload = (e) => {\n    const reader = new FileReader();\n    const file = fileInput.current.files[0];\n    if (!file) {\n      return;\n    }\n    if (file.size * 9.5367e-7 > 50) {\n      alert(\"용량이 너무 큽니다.(50mb 이하)\");\n      return;\n    }\n    reader.onloadstart = (e) => {\n      setVid(null);\n    };\n    reader.readAsDataURL(file);\n    reader.onloadend = (e) => {\n      setVid(file);\n    };\n  };\n\n  const triggerVideo = () => {\n    fileInput.current.click(); // 인풋 클릭한 효과\n  };\n\n  const change = (e) => {\n    if (e.target.value.length > 10) {\n      e.target.value = e.target.value.substr(0, 10);\n    }\n    const curValue = e.target.value;\n    // const regExp = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"\\s]/gi;\n    const regExp = /[{}[\\]/?.,;:|)*~`!^\\-_+<>@#$%&\\\\=('\"\\s]/gi;\n    const newValue = curValue.replace(regExp, \"\");\n    setTagType(newValue);\n  };\n\n  return (\n    <React.Fragment>\n      <Wrap>\n        <VideoView onClick={triggerVideo}>\n          {!(vid === null) ? (\n            <Uploading src={afterImg} />\n          ) : (\n            <>\n              <p style={{ fontSize: \"25px\" }}>영상을 업로드해주세요.(클릭)</p>\n              <p style={{ fontSize: \"15px\" }}>\n                영상 길이 10초 이하, 크기 50MB 이하\n              </p>\n            </>\n          )}\n          <input\n            type=\"file\"\n            accept=\"video/*\"\n            ref={fileInput}\n            onChange={upload}\n            style={{ display: \"none\" }}\n          />\n        </VideoView>\n        <Text>\n          {tags.map((tag, i) => (\n            <Li key={tag}>\n              {tag}\n              <Libutton\n                type=\"button\"\n                onClick={() => {\n                  removeTag(i);\n                }}\n              >\n                <IconCover>\n                  <ClearIcon />\n                </IconCover>\n              </Libutton>\n            </Li>\n          ))}\n        </Text>\n        <Tag>태그 (최대 3개)</Tag>\n        <InputTag>\n          <Input\n            type=\"text\"\n            maxLength={10}\n            value={tagType}\n            onKeyDown={InputKeyDown}\n            ref={tagInput}\n            placeholder=\"# 자유롭게 적고 엔터를 눌러주세요.(10자 제한)\"\n            onChange={change}\n          ></Input>\n        </InputTag>\n      </Wrap>\n      <ButtonWrap>\n        <Button onClick={post}>작성완료</Button>\n        <Button>취소</Button>\n      </ButtonWrap>\n    </React.Fragment>\n  );\n};\n\nconst Uploading = styled.div`\n  display: flex;\n  height: 100%;\n  width: 100%;\n  margin: 0 auto;\n  background-image: url(\"${(props) => props.src}\");\n  background-color: #ededed;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n`;\n\nconst IconCover = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & svg {\n    width: 1rem;\n  }\n`;\n\nconst Libutton = styled.div`\n  display: inline-flex;\n  align-items: center;\n  appearance: none;\n  background: #333333;\n  border: none;\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  font-size: 12px;\n  height: 15px;\n  justify-content: center;\n  line-height: 0;\n  margin-left: 8px;\n  padding: 0;\n  width: 15px;\n  outline: 0;\n`;\n\nconst Li = styled.li`\n  font-family: \"AppleSDGothicNeoR\";\n  align-items: center;\n  background: #40c7c3;\n  border-radius: 5px;\n  color: white;\n  display: flex;\n  font-weight: 300;\n  list-style: none;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  margin-left: 8px;\n  padding: 5px 10px;\n`;\n\nconst InputTag = styled.div`\n  width: 37rem;\n  height: auto;\n  border: 1px solid #2b61e1;\n  border-radius: 5px;\n  display: inline-flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  margin: 0px auto;\n  padding: 5px;\n  @media (max-width: 600px) {\n    width: calc(100% - 20px);\n  }\n`;\n\nconst Wrap = styled.div`\n  font-family: \"paybooc-Bold\";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst VideoView = styled.div`\n  cursor: pointer;\n  z-index: 5;\n  width: 37rem;\n  height: 28rem;\n  margin: 0px auto;\n  box-shadow: 0px 3px 6px #00000029;\n  border: 1px solid #2b61e1;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #2b61e1;\n  margin-top: 1rem;\n  @media only screen and (max-width: 630px) {\n    width: calc(100% - 20px);\n    height: 20rem;\n  }\n`;\n\nconst Text = styled.div`\n  width: 37rem;\n  font-family: \"AppleSDGothicNeoR\";\n  font-size: 15px;\n  display: flex;\n  justify-content: flex-start;\n  margin: 0px auto;\n  margin-top: 1rem;\n  margin-bottom: 2rem;\n  @media (max-width: 600px) {\n    width: calc(100% - 20px);\n  }\n`;\n\nconst Tag = styled.div`\n  width: 37rem;\n  color: #2b61e1;\n  display: flex;\n  justify-content: flex-start;\n  margin: 0px auto;\n  margin-bottom: 1rem;\n  @media (max-width: 600px) {\n    width: calc(100% - 20px);\n  }\n`;\n\nconst Input = styled.input`\n  outline: none;\n  width: 35rem;\n  height: 2.5rem;\n  border: 0;\n  border-radius: 5px;\n  display: flex;\n  justify-content: flex-start;\n  /* margin: 0px auto; */\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  font-size: 1rem;\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst ButtonWrap = styled.div`\n  width: 40rem;\n  margin: 0px auto;\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  @media only screen and (max-width: 860px) {\n    flex-direction: column;\n    margin-top: 1rem;\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  cursor: pointer;\n  font-family: \"paybooc-Bold\";\n  color: #ffffff;\n  font-size: 1rem;\n  width: 15rem;\n  height: 3rem;\n  background-color: ${(props) => (props.ok ? \"#2b61e1\" : \"#707070\")};\n  box-shadow: 0px 3px 6px #00000029;\n  border: 1px solid;\n  border-color: ${(props) => (props.ok ? \"#2b61e1\" : \"#707070\")};\n  border-radius: 5px;\n  @media only screen and (max-width: 860px) {\n    margin: 5px auto;\n  }\n`;\n\nexport default TrilsWrite;\n"]},"metadata":{},"sourceType":"module"}