{"ast":null,"code":"var _jsxFileName = \"/Users/parkminkyung/Desktop/git/triport/src/pages/SnsWrite.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SnsWrite = () => {\n  _s();\n\n  const tagInput = useRef(null);\n  const fileInput = useRef();\n  const player = useRef(null);\n  const [tags, setTags] = useState([]);\n  const [preview, setPreview] = useState(null);\n\n  const removeTag = i => {\n    const newTags = [...tags];\n    newTags.splice(i, 1);\n    console.log(newTags);\n    setTags([...newTags]);\n  };\n\n  const InputKeyDown = e => {\n    const val = e.target.value;\n\n    if ((e.key === \"Enter\" || e.key === \",\" || e.key === \" \") && val) {\n      if (tags.length === 3) {\n        alert(\"태그는 최대 3개까지 가능합니다.\");\n        return;\n      }\n\n      if (tags.find(tag => tag.toLowerCase() === val.toLowerCase())) {\n        return;\n      }\n\n      setTags([...tags, val]);\n      tagInput.current.value = null;\n    } else if (e.key === \"Backspace\" && !val) {\n      removeTag(tags.length - 1);\n    }\n  };\n\n  const upload = e => {\n    const reader = new FileReader();\n    const file = fileInput.current.files[0];\n\n    if (!file) {\n      return;\n    }\n\n    if (file.size * 9.5367e-7 > 300) {\n      alert(\"용량이 너무 큽니다.(300mb 이하)\");\n      return;\n    }\n\n    reader.onloadstart = e => {\n      setPreview(null);\n    };\n\n    reader.readAsDataURL(file);\n\n    reader.onloadend = e => {\n      const videoElement = document.createElement(\"video\");\n      videoElement.src = e.target.result;\n      const timer = setInterval(() => {\n        if (videoElement.readyState === 4) {\n          if (videoElement.duration > 100) {\n            alert(\"영상 길이를 확인해주세요.(100초 이하)\");\n            clearInterval(timer);\n            return;\n          } // else if (videoElement.duration > 30) {\n          //   alert(\"영상 길이를 확인해주세요.(10초 이상)\");\n          //   clearInterval(timer);\n          //   return;\n          // }\n          else {\n              setPreview(e.target.result);\n              clearInterval(timer);\n            }\n        }\n      }, 100);\n    };\n  };\n\n  const triggerVideo = () => {\n    fileInput.current.click(); // 인풋 클릭한 효과\n  };\n\n  const videoplay = () => {\n    player.current.play();\n  };\n\n  const videopause = () => {\n    player.current.pause();\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Wrap, {\n      children: [/*#__PURE__*/_jsxDEV(VideoView, {\n        onClick: triggerVideo,\n        children: [!(preview === null) ? /*#__PURE__*/_jsxDEV(Player, {\n          ref: player,\n          onMouseOver: videoplay,\n          onMouseLeave: videopause,\n          src: preview,\n          muted: true,\n          type: \"video/mp4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: \"25px\"\n            },\n            children: \"\\uC601\\uC0C1\\uC744 \\uC62C\\uB824\\uC8FC\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: \"15px\"\n            },\n            children: \"10MB \\uC81C\\uD55C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"video/mp4\",\n          ref: fileInput,\n          onChange: upload,\n          style: {\n            display: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: \"#\\uAC15\\uB989 #\\uC5EC\\uD589 #\\uB9DB\\uC9D1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tag, {\n        children: \"\\uD0DC\\uADF8 (\\uCD5C\\uB300 3\\uAC1C)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputTag, {\n        children: [tags.map((tag, i) => /*#__PURE__*/_jsxDEV(Li, {\n          children: [tag, /*#__PURE__*/_jsxDEV(Libutton, {\n            type: \"button\",\n            onClick: () => {\n              removeTag(i);\n            },\n            children: /*#__PURE__*/_jsxDEV(IconCover, {\n              children: /*#__PURE__*/_jsxDEV(ClearIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this)]\n        }, tag, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          onKeyDown: InputKeyDown,\n          ref: tagInput,\n          placeholder: \"# \\uC790\\uC720\\uB86D\\uAC8C \\uC801\\uACE0 \\uC5D4\\uD130\\uB97C \\uB20C\\uB7EC\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ButtonWrap, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        ok: true,\n        children: \"\\uC791\\uC131\\uC644\\uB8CC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        children: \"\\uCDE8\\uC18C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SnsWrite, \"ktaZHf88mi96D+3D03gTW+OIfyY=\");\n\n_c = SnsWrite;\nexport default SnsWrite;\nconst Player = styled.video`\n  width: 37rem;\n  height: 28rem;\n  background: black;\n`;\n_c2 = Player;\nconst IconCover = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & svg {\n    width: 1rem;\n  }\n`;\n_c3 = IconCover;\nconst Libutton = styled.div`\n  display: inline-flex;\n  align-items: center;\n  appearance: none;\n  background: #333333;\n  border: none;\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  font-size: 12px;\n  height: 15px;\n  justify-content: center;\n  line-height: 0;\n  margin-left: 8px;\n  padding: 0;\n  width: 15px;\n  outline: 0;\n`;\n_c4 = Libutton;\nconst Li = styled.li`\n  font-family: \"AppleSDGothicNeoR\";\n  align-items: center;\n  background: #40c7c3;\n  border-radius: 5px;\n  color: white;\n  display: flex;\n  font-weight: 300;\n  list-style: none;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  margin-left: 8px;\n  padding: 5px 10px;\n`;\n_c5 = Li;\nconst InputTag = styled.div`\n  width: 37rem;\n  height: auto;\n  border: 1px solid #2b61e1;\n  border-radius: 5px;\n  display: inline-flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  margin: 0px auto;\n  padding: 5px;\n`;\n_c6 = InputTag;\nconst Wrap = styled.div`\n  font-family: \"TTTogether\";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n_c7 = Wrap;\nconst VideoView = styled.div`\n  cursor: pointer;\n  z-index: 5;\n  width: 37rem;\n  height: 28rem;\n  margin: 0px auto;\n  box-shadow: 0px 3px 6px #00000029;\n  border: 1px solid #2b61e1;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #2b61e1;\n  margin-top: 5rem;\n`;\n_c8 = VideoView;\nconst Text = styled.div`\n  width: 37rem;\n  font-family: \"AppleSDGothicNeoR\";\n  font-size: 15px;\n  display: flex;\n  justify-content: flex-start;\n  margin: 0px auto;\n  margin-top: 1rem;\n  margin-bottom: 2rem;\n`;\n_c9 = Text;\nconst Tag = styled.div`\n  width: 37rem;\n  color: #2b61e1;\n  display: flex;\n  justify-content: flex-start;\n  margin: 0px auto;\n  margin-bottom: 1rem;\n`;\n_c10 = Tag;\nconst Input = styled.input`\n  outline: none;\n  width: 35rem;\n  height: 2.5rem;\n  border: 0;\n  border-radius: 5px;\n  display: flex;\n  justify-content: flex-start;\n  /* margin: 0px auto; */\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  font-size: 1rem;\n`;\n_c11 = Input;\nconst ButtonWrap = styled.div`\n  width: 50rem;\n  margin: 0px auto;\n  margin-top: 5rem;\n  margin-bottom: 5rem;\n  display: flex;\n  justify-content: space-between;\n`;\n_c12 = ButtonWrap;\nconst Button = styled.button`\n  font-family: \"TTTogether\";\n  color: #ffffff;\n  font-size: 1rem;\n  width: 20rem;\n  height: 3rem;\n  background-color: ${props => props.ok ? \"#2b61e1\" : \"#707070\"};\n  box-shadow: 0px 3px 6px #00000029;\n  border: 1px solid;\n  border-color: ${props => props.ok ? \"#2b61e1\" : \"#707070\"};\n  border-radius: 5px;\n`;\n_c13 = Button;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13;\n\n$RefreshReg$(_c, \"SnsWrite\");\n$RefreshReg$(_c2, \"Player\");\n$RefreshReg$(_c3, \"IconCover\");\n$RefreshReg$(_c4, \"Libutton\");\n$RefreshReg$(_c5, \"Li\");\n$RefreshReg$(_c6, \"InputTag\");\n$RefreshReg$(_c7, \"Wrap\");\n$RefreshReg$(_c8, \"VideoView\");\n$RefreshReg$(_c9, \"Text\");\n$RefreshReg$(_c10, \"Tag\");\n$RefreshReg$(_c11, \"Input\");\n$RefreshReg$(_c12, \"ButtonWrap\");\n$RefreshReg$(_c13, \"Button\");","map":{"version":3,"sources":["/Users/parkminkyung/Desktop/git/triport/src/pages/SnsWrite.js"],"names":["React","useRef","useState","styled","ClearIcon","SnsWrite","tagInput","fileInput","player","tags","setTags","preview","setPreview","removeTag","i","newTags","splice","console","log","InputKeyDown","e","val","target","value","key","length","alert","find","tag","toLowerCase","current","upload","reader","FileReader","file","files","size","onloadstart","readAsDataURL","onloadend","videoElement","document","createElement","src","result","timer","setInterval","readyState","duration","clearInterval","triggerVideo","click","videoplay","play","videopause","pause","fontSize","display","map","Player","video","IconCover","div","Libutton","Li","li","InputTag","Wrap","VideoView","Text","Tag","Input","input","ButtonWrap","Button","button","props","ok"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\n\nconst SnsWrite = () => {\n  const tagInput = useRef(null);\n  const fileInput = useRef();\n  const player = useRef(null);\n  const [tags, setTags] = useState([]);\n  const [preview, setPreview] = useState(null);\n\n  const removeTag = (i) => {\n    const newTags = [...tags];\n    newTags.splice(i, 1);\n    console.log(newTags);\n    setTags([...newTags]);\n  };\n\n  const InputKeyDown = (e) => {\n    const val = e.target.value;\n    if ((e.key === \"Enter\" || e.key === \",\" || e.key === \" \") && val) {\n      if (tags.length === 3) {\n        alert(\"태그는 최대 3개까지 가능합니다.\");\n        return;\n      }\n      if (tags.find((tag) => tag.toLowerCase() === val.toLowerCase())) {\n        return;\n      }\n      setTags([...tags, val]);\n      tagInput.current.value = null;\n    } else if (e.key === \"Backspace\" && !val) {\n      removeTag(tags.length - 1);\n    }\n  };\n\n  const upload = (e) => {\n    const reader = new FileReader();\n    const file = fileInput.current.files[0];\n    if (!file) {\n      return;\n    }\n    if (file.size * 9.5367e-7 > 300) {\n      alert(\"용량이 너무 큽니다.(300mb 이하)\");\n      return;\n    }\n    reader.onloadstart = (e) => {\n      setPreview(null);\n    };\n    reader.readAsDataURL(file);\n    reader.onloadend = (e) => {\n      const videoElement = document.createElement(\"video\");\n      videoElement.src = e.target.result;\n      const timer = setInterval(() => {\n        if (videoElement.readyState === 4) {\n          if (videoElement.duration > 100) {\n            alert(\"영상 길이를 확인해주세요.(100초 이하)\");\n            clearInterval(timer);\n            return;\n          }\n          // else if (videoElement.duration > 30) {\n          //   alert(\"영상 길이를 확인해주세요.(10초 이상)\");\n          //   clearInterval(timer);\n          //   return;\n          // }\n          else {\n            setPreview(e.target.result);\n            clearInterval(timer);\n          }\n        }\n      }, 100);\n    };\n  };\n\n  const triggerVideo = () => {\n    fileInput.current.click(); // 인풋 클릭한 효과\n  };\n\n  const videoplay = () => {\n    player.current.play();\n  };\n\n  const videopause = () => {\n    player.current.pause();\n  };\n\n  return (\n    <React.Fragment>\n      <Wrap>\n        <VideoView onClick={triggerVideo}>\n          {!(preview === null) ? (\n            <Player\n              ref={player}\n              onMouseOver={videoplay}\n              onMouseLeave={videopause}\n              src={preview}\n              muted\n              type=\"video/mp4\"\n            />\n          ) : (\n            <>\n              <p style={{ fontSize: \"25px\" }}>영상을 올려주세요.</p>\n              <p style={{ fontSize: \"15px\" }}>10MB 제한</p>\n            </>\n          )}\n          <input\n            type=\"file\"\n            accept=\"video/mp4\"\n            ref={fileInput}\n            onChange={upload}\n            style={{ display: \"none\" }}\n          />\n        </VideoView>\n        <Text>#강릉 #여행 #맛집</Text>\n        <Tag>태그 (최대 3개)</Tag>\n        <InputTag>\n          {tags.map((tag, i) => (\n            <Li key={tag}>\n              {tag}\n              <Libutton\n                type=\"button\"\n                onClick={() => {\n                  removeTag(i);\n                }}\n              >\n                <IconCover>\n                  <ClearIcon />\n                </IconCover>\n              </Libutton>\n            </Li>\n          ))}\n          <Input\n            type=\"text\"\n            onKeyDown={InputKeyDown}\n            ref={tagInput}\n            placeholder=\"# 자유롭게 적고 엔터를 눌러주세요.\"\n          ></Input>\n        </InputTag>\n      </Wrap>\n      <ButtonWrap>\n        <Button ok>작성완료</Button>\n        <Button>취소</Button>\n      </ButtonWrap>\n    </React.Fragment>\n  );\n};\n\nexport default SnsWrite;\n\nconst Player = styled.video`\n  width: 37rem;\n  height: 28rem;\n  background: black;\n`;\n\nconst IconCover = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & svg {\n    width: 1rem;\n  }\n`;\n\nconst Libutton = styled.div`\n  display: inline-flex;\n  align-items: center;\n  appearance: none;\n  background: #333333;\n  border: none;\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  font-size: 12px;\n  height: 15px;\n  justify-content: center;\n  line-height: 0;\n  margin-left: 8px;\n  padding: 0;\n  width: 15px;\n  outline: 0;\n`;\n\nconst Li = styled.li`\n  font-family: \"AppleSDGothicNeoR\";\n  align-items: center;\n  background: #40c7c3;\n  border-radius: 5px;\n  color: white;\n  display: flex;\n  font-weight: 300;\n  list-style: none;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  margin-left: 8px;\n  padding: 5px 10px;\n`;\n\nconst InputTag = styled.div`\n  width: 37rem;\n  height: auto;\n  border: 1px solid #2b61e1;\n  border-radius: 5px;\n  display: inline-flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  margin: 0px auto;\n  padding: 5px;\n`;\n\nconst Wrap = styled.div`\n  font-family: \"TTTogether\";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst VideoView = styled.div`\n  cursor: pointer;\n  z-index: 5;\n  width: 37rem;\n  height: 28rem;\n  margin: 0px auto;\n  box-shadow: 0px 3px 6px #00000029;\n  border: 1px solid #2b61e1;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #2b61e1;\n  margin-top: 5rem;\n`;\n\nconst Text = styled.div`\n  width: 37rem;\n  font-family: \"AppleSDGothicNeoR\";\n  font-size: 15px;\n  display: flex;\n  justify-content: flex-start;\n  margin: 0px auto;\n  margin-top: 1rem;\n  margin-bottom: 2rem;\n`;\n\nconst Tag = styled.div`\n  width: 37rem;\n  color: #2b61e1;\n  display: flex;\n  justify-content: flex-start;\n  margin: 0px auto;\n  margin-bottom: 1rem;\n`;\n\nconst Input = styled.input`\n  outline: none;\n  width: 35rem;\n  height: 2.5rem;\n  border: 0;\n  border-radius: 5px;\n  display: flex;\n  justify-content: flex-start;\n  /* margin: 0px auto; */\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  font-size: 1rem;\n`;\n\nconst ButtonWrap = styled.div`\n  width: 50rem;\n  margin: 0px auto;\n  margin-top: 5rem;\n  margin-bottom: 5rem;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Button = styled.button`\n  font-family: \"TTTogether\";\n  color: #ffffff;\n  font-size: 1rem;\n  width: 20rem;\n  height: 3rem;\n  background-color: ${(props) => (props.ok ? \"#2b61e1\" : \"#707070\")};\n  box-shadow: 0px 3px 6px #00000029;\n  border: 1px solid;\n  border-color: ${(props) => (props.ok ? \"#2b61e1\" : \"#707070\")};\n  border-radius: 5px;\n`;\n"]},"metadata":{},"sourceType":"module"}