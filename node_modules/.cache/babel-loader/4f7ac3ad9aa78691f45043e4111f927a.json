{"ast":null,"code":"var _jsxFileName = \"/Users/parkminkyung/Desktop/git/triport/src/components/trilog/BoardChildComment.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { CommentLike } from \"media/svg/Svg\";\nimport { config } from \"redux/modules/config\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst BoardChildComment = props => {\n  _s();\n\n  const {\n    comment,\n    setData\n  } = props; // 부모 댓글 state 변경을 위해 setData 가져옴\n\n  const [likeNum, setLikeNum] = React.useState(comment.commentChild.likeNum); // 자식 댓글 좋아요 여부\n\n  const [edit, setEdit] = React.useState(false); // 자식 댓글 수정 버튼 토글 - input 태그 활성화 여부\n\n  const [childCommentEdit, setChildCommentEdit] = React.useState(comment.commentChild.contents); // 자식 댓글 내용\n\n  const [childCommentDate, setChildCommentDate] = React.useState(comment.commentChild.modifiedAt); // 자식 댓글 등록 시간\n\n  const hitLike = () => {\n    const access_token = localStorage.getItem(\"access_token\");\n    const api = `${config}/api/boards/comments/children/like/${comment.commentChild.id}`;\n    fetch(api, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `${access_token}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data.msg.includes(\"추가\")) {\n        setLikeNum(prevState => prevState + 1);\n      } else {\n        setLikeNum(prevState => prevState - 1);\n      }\n    }).catch(err => console.log(err, \"child comment like\"));\n  };\n\n  const showEdit = () => {\n    setEdit(!edit);\n  };\n\n  const editComment = () => {\n    const access_token = localStorage.getItem(\"access_token\");\n    fetch(`${config}/api/boards/comments/children/${comment.commentChild.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': `${access_token}`\n      },\n      body: JSON.stringify({\n        contents: childCommentEdit\n      })\n    }).then(res => res.json()).then(data => {\n      Swal.fire({\n        title: data.msg,\n        icon: \"success\"\n      });\n      setChildCommentDate(data.results.commentChild.modifiedAt);\n    }).catch(err => console.log(err, 'edit child comment trilog'));\n    setData(prevState => {\n      prevState.forEach(val => {\n        if (val.commentChild.id === comment.commentChild.id) {\n          val.commentChild.contents = childCommentEdit;\n          val.commentChild.modifiedAt = childCommentDate;\n        }\n      });\n      return prevState;\n    });\n    setEdit(!edit);\n  };\n\n  const deleteComment = () => {\n    Swal.fire({\n      title: '해당 댓글을 삭제하시겠습니까?',\n      showDenyButton: true,\n      showCancelButton: false,\n      confirmButtonText: `삭제`,\n      denyButtonText: `취소`\n    }).then(result => {\n      if (result.isConfirmed) {\n        setData(prevState => {\n          return prevState.filter(val => val.commentChild.id !== comment.commentChild.id);\n        });\n        const access_token = localStorage.getItem(\"access_token\");\n        fetch(`${config}/api/boards/comments/children/${comment.commentChild.id}`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Authorization': `${access_token}`\n          }\n        }).then(res => res.json()).then(data => {\n          Swal.fire({\n            title: data.msg,\n            icon: \"success\"\n          });\n        }).catch(err => console.log(err, 'remove child comment trilog'));\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ChildComment, {\n      children: [/*#__PURE__*/_jsxDEV(UserContainer, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: comment.author.profileImgUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: comment.author.nickname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Content, {\n        children: edit ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(EditInput, {\n            type: \"text\",\n            value: childCommentEdit,\n            onChange: e => setChildCommentEdit(e.target.value),\n            onKeyPress: () => {\n              if (window.event.keyCode === 13) {\n                editComment();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: comment.commentChild.contents\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Date, {\n            children: comment.commentChild.modifiedAt\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Likes, {\n      children: [/*#__PURE__*/_jsxDEV(LikeSpan, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: hitLike,\n          children: /*#__PURE__*/_jsxDEV(CommentLike, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"+\", likeNum]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), comment.user.isMembers ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(EditButton, {\n          type: \"button\",\n          value: edit ? \"취소\" : \"수정\",\n          onClick: showEdit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DeleteButton, {\n          type: \"button\",\n          value: \"\\uC0AD\\uC81C\",\n          onClick: deleteComment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BoardChildComment, \"pBG3YNz+CuYxhgWhGE0kD5Gyn1g=\");\n\n_c = BoardChildComment;\nexport default BoardChildComment;\nconst ChildComment = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n\n  @media (max-width: 600px) {\n    font-size: 14px;\n  }\n`;\n_c2 = ChildComment;\nconst UserContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 1rem;\n  font-family: \"AppleSDGothicNeoB\";\n\n  & img {\n    width: 2.375rem;\n    border-radius: 50%;\n    margin-right: 0.5rem;\n  }\n`;\n_c3 = UserContainer;\nconst Content = styled.div`\n  display: flex;\n  align-items: center;\n`;\n_c4 = Content;\nconst Date = styled.div`\n  position: absolute;\n  right: 0;\n  \n  @media (max-width: 980px) {\n    display: none;\n  }\n`;\n_c5 = Date;\nconst Likes = styled.div`\n  margin: 0.5rem 0 0.5rem 2.5rem;\n  display: flex;\n  align-items: center;\n\n  & span {\n    width: 65px;\n  }\n`;\n_c6 = Likes;\nconst LikeSpan = styled.span`\n  display: flex;\n  align-items: center;\n\n  & svg {\n    cursor: pointer;\n    width: 1.2rem;\n    margin-right: 0.5rem;\n  }\n\n  & span {\n    font-size: 15px;\n  }\n`;\n_c7 = LikeSpan;\nconst EditButton = styled.input`\n  cursor: pointer;\n  background-color: #2b61e1;\n  color: #fff;\n  border: 1px solid #2b61e1;\n  border-radius: 5px;\n  padding: 0.1rem 0.5rem;\n  margin: 0 0.5rem;\n  font-size: 11px;\n`;\n_c8 = EditButton;\nconst DeleteButton = styled.input`\n  cursor: pointer;\n  background-color: #f22d3f;\n  border: 1px solid #f22d3f;\n  color: #fff;\n  border-radius: 5px;\n  padding: 0.1rem 0.5rem;\n  font-size: 11px;\n`;\n_c9 = DeleteButton;\nconst EditInput = styled.input`\n  outline: none;\n  border: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 40px;\n  border: 1px solid rgb(43, 97, 225, 0.6);\n  border-radius: 5px;\n  padding: 0 1rem;\n`;\n_c10 = EditInput;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"BoardChildComment\");\n$RefreshReg$(_c2, \"ChildComment\");\n$RefreshReg$(_c3, \"UserContainer\");\n$RefreshReg$(_c4, \"Content\");\n$RefreshReg$(_c5, \"Date\");\n$RefreshReg$(_c6, \"Likes\");\n$RefreshReg$(_c7, \"LikeSpan\");\n$RefreshReg$(_c8, \"EditButton\");\n$RefreshReg$(_c9, \"DeleteButton\");\n$RefreshReg$(_c10, \"EditInput\");","map":{"version":3,"sources":["/Users/parkminkyung/Desktop/git/triport/src/components/trilog/BoardChildComment.js"],"names":["React","styled","CommentLike","config","Swal","BoardChildComment","props","comment","setData","likeNum","setLikeNum","useState","commentChild","edit","setEdit","childCommentEdit","setChildCommentEdit","contents","childCommentDate","setChildCommentDate","modifiedAt","hitLike","access_token","localStorage","getItem","api","id","fetch","method","headers","Accept","Authorization","then","res","json","data","msg","includes","prevState","catch","err","console","log","showEdit","editComment","body","JSON","stringify","fire","title","icon","results","forEach","val","deleteComment","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","result","isConfirmed","filter","author","profileImgUrl","nickname","e","target","value","window","event","keyCode","user","isMembers","ChildComment","div","UserContainer","Content","Date","Likes","LikeSpan","span","EditButton","input","DeleteButton","EditInput"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { CommentLike } from \"media/svg/Svg\";\r\nimport { config } from \"redux/modules/config\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst BoardChildComment = (props) => {\r\n  const { comment, setData } = props; // 부모 댓글 state 변경을 위해 setData 가져옴\r\n  const [likeNum, setLikeNum] = React.useState(comment.commentChild.likeNum); // 자식 댓글 좋아요 여부\r\n  const [edit, setEdit] = React.useState(false); // 자식 댓글 수정 버튼 토글 - input 태그 활성화 여부\r\n  const [childCommentEdit, setChildCommentEdit] = React.useState(comment.commentChild.contents); // 자식 댓글 내용\r\n  const [childCommentDate, setChildCommentDate] = React.useState(comment.commentChild.modifiedAt); // 자식 댓글 등록 시간\r\n\r\n  const hitLike = () => {\r\n    const access_token = localStorage.getItem(\"access_token\");\r\n    const api = `${config}/api/boards/comments/children/like/${comment.commentChild.id}`;\r\n\r\n    fetch(api, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        Authorization: `${access_token}`,\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.msg.includes(\"추가\")) {\r\n          setLikeNum((prevState) => prevState + 1);\r\n        } else {\r\n          setLikeNum((prevState) => prevState - 1);\r\n        }\r\n      })\r\n      .catch((err) => console.log(err, \"child comment like\"));\r\n  };\r\n\r\n  const showEdit = () => {\r\n    setEdit(!edit);\r\n  };\r\n\r\n  const editComment = () => {\r\n    const access_token = localStorage.getItem(\"access_token\");\r\n    fetch(`${config}/api/boards/comments/children/${comment.commentChild.id}`, {\r\n        method : 'PUT',\r\n        headers : {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n            'Authorization': `${access_token}`,\r\n        },\r\n        body: JSON.stringify({\r\n            contents: childCommentEdit,\r\n        })\r\n    })\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      Swal.fire({\r\n          title: data.msg,\r\n          icon: \"success\",\r\n      });\r\n      setChildCommentDate(data.results.commentChild.modifiedAt);\r\n    })\r\n    .catch(err => console.log(err, 'edit child comment trilog'));\r\n\r\n    setData(prevState => {\r\n      prevState.forEach((val) => {\r\n        if(val.commentChild.id === comment.commentChild.id) {\r\n          val.commentChild.contents = childCommentEdit;\r\n          val.commentChild.modifiedAt = childCommentDate;\r\n        }\r\n      })\r\n      \r\n      return prevState;\r\n    });\r\n\r\n    setEdit(!edit);\r\n  };\r\n\r\n  const deleteComment = () => {\r\n    Swal.fire({\r\n      title: '해당 댓글을 삭제하시겠습니까?',\r\n      showDenyButton: true,\r\n      showCancelButton: false,\r\n      confirmButtonText: `삭제`,\r\n      denyButtonText: `취소`,\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        setData(prevState => {\r\n          return prevState.filter((val) => val.commentChild.id !== comment.commentChild.id);\r\n        });\r\n  \r\n        const access_token = localStorage.getItem(\"access_token\");\r\n        fetch(`${config}/api/boards/comments/children/${comment.commentChild.id}`, {\r\n            method : 'DELETE',\r\n            headers : {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': `${access_token}`,\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            Swal.fire({\r\n              title: data.msg,\r\n              icon: \"success\",\r\n          });\r\n        })\r\n        .catch(err => console.log(err, 'remove child comment trilog'));\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ChildComment>\r\n        <UserContainer>\r\n          <img src={comment.author.profileImgUrl} />\r\n          <span>{comment.author.nickname}</span>\r\n        </UserContainer>\r\n        <Content>\r\n          {edit ? (\r\n            <>\r\n              <EditInput\r\n                type=\"text\"\r\n                value={childCommentEdit}\r\n                onChange={(e) => setChildCommentEdit(e.target.value)}\r\n                onKeyPress={() => {\r\n                  if (window.event.keyCode === 13) {\r\n                    editComment();\r\n                  }\r\n                }}\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div>{comment.commentChild.contents}</div>\r\n              <Date>{comment.commentChild.modifiedAt}</Date>\r\n            </>\r\n          )}\r\n        </Content>\r\n      </ChildComment>\r\n      <Likes>\r\n        <LikeSpan>\r\n          <div onClick={hitLike}>\r\n            <CommentLike />\r\n          </div>\r\n          <span>+{likeNum}</span>\r\n        </LikeSpan>\r\n        {comment.user.isMembers ? (\r\n          <>\r\n            <EditButton\r\n              type=\"button\"\r\n              value={edit ? \"취소\" : \"수정\"}\r\n              onClick={showEdit}\r\n            />\r\n            <DeleteButton type=\"button\" value=\"삭제\" onClick={deleteComment} />\r\n          </>\r\n        ) : (\r\n          <></>\r\n        )}\r\n      </Likes>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BoardChildComment;\r\n\r\nconst ChildComment = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  @media (max-width: 600px) {\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst UserContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 1rem;\r\n  font-family: \"AppleSDGothicNeoB\";\r\n\r\n  & img {\r\n    width: 2.375rem;\r\n    border-radius: 50%;\r\n    margin-right: 0.5rem;\r\n  }\r\n`;\r\n\r\nconst Content = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Date = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  \r\n  @media (max-width: 980px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst Likes = styled.div`\r\n  margin: 0.5rem 0 0.5rem 2.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  & span {\r\n    width: 65px;\r\n  }\r\n`;\r\n\r\nconst LikeSpan = styled.span`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  & svg {\r\n    cursor: pointer;\r\n    width: 1.2rem;\r\n    margin-right: 0.5rem;\r\n  }\r\n\r\n  & span {\r\n    font-size: 15px;\r\n  }\r\n`;\r\n\r\nconst EditButton = styled.input`\r\n  cursor: pointer;\r\n  background-color: #2b61e1;\r\n  color: #fff;\r\n  border: 1px solid #2b61e1;\r\n  border-radius: 5px;\r\n  padding: 0.1rem 0.5rem;\r\n  margin: 0 0.5rem;\r\n  font-size: 11px;\r\n`;\r\n\r\nconst DeleteButton = styled.input`\r\n  cursor: pointer;\r\n  background-color: #f22d3f;\r\n  border: 1px solid #f22d3f;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n  padding: 0.1rem 0.5rem;\r\n  font-size: 11px;\r\n`;\r\n\r\nconst EditInput = styled.input`\r\n  outline: none;\r\n  border: 0;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 40px;\r\n  border: 1px solid rgb(43, 97, 225, 0.6);\r\n  border-radius: 5px;\r\n  padding: 0 1rem;\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}